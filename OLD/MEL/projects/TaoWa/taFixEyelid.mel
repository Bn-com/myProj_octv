global proc taFixEyelid()
{
	string $sl[] = `ls -sl "*Rig"`;
	if (`objExists $sl[0]`)
	{
		if (`gmatch $sl[0] "*woman_4223b_Rig*"`)
		{
			if (!`objExists ($sl[0] + "|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM")`)
				error ("层级结构改变了,需要 " + $sl[0] + "|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM");		

			//right eye
			string $p1[] = `ls -type projection "Doozer_uv_7_projection37"`;
			if (!`objExists $p1[0]`)
				error ("没有Doozer_uv_7_projection37节点");		
			string $dup[] = `duplicate -inputConnections $p1[0]`;
			string $dup1[] = `duplicate -inputConnections Doozer_uv_7_FaceProjections_file101`;
			connectAttr -f ($dup1[0] + ".outColor") ($dup[0]+".image");
			string $lam = `shadingNode -asShader lambert -name "woman4223beye_rlambert"`;

			string $dup2[] = `duplicate -inputConnections $p1[0]`;
			string $ramp = `shadingNode -asTexture ramp`;
			removeMultiInstance -break true ($ramp + ".colorEntryList[1]");
			removeMultiInstance -break true ($ramp + ".colorEntryList[2]");
			setAttr ($ramp + ".colorEntryList[0].color") -type double3 0.467 0.298 0.161 ;
			connectAttr -f ($ramp + ".outColor") ($dup2[0] + ".image");
			connectAttr -f ($dup2[0] + ".outColor") ($lam + ".color");
			string $right[] = `listConnections -s 0 -d 1 -type bump3d $p1[0] `;
			string $oldlam = "";
			if (`objExists $right[0]`)
			{
				string $r[] = `listConnections -s 0 -d 1 -type lambert $right[0]`;
				if (`objExists $r[0]`)
					$oldlam = $r[0];

			}
			if (!`objExists $oldlam`)
				error ("没有需要的lambert");		
			connectAttr -force ($dup[0] + ".outColor") ($oldlam +".transparency");
			connectAttr -force "Doozer_uv_7_projection36.outColor" ($lam +".transparency");
			string $uselessexp[] = `listConnections -s 1 -d 0 -type expression Doozer_uv_7_file100`;
			if (size($uselessexp))
				delete $uselessexp;
			setAttr "Doozer_uv_7_file100.useFrameExtension" 0;	
			
			string $uselessexp[] = `listConnections -s 1 -d 0 -type expression Doozer_uv_7_file99`;
			if (size($uselessexp))
				delete $uselessexp;
		
			//left eye
			string $p1[] = `ls -type projection "Doozer_uv_7_projection42"`;
			if (!`objExists $p1[0]`)
				error ("没有Doozer_uv_7_projection42");		
			string $dup[] = `duplicate -inputConnections $p1[0]`;
			string $dup1[] = `duplicate -inputConnections Doozer_uv_7_FaceProjections_file106`;
			connectAttr -f ($dup1[0] + ".outColor") ($dup[0]+".image");
			string $lam = `shadingNode -asShader lambert -name "woman4223beye_llambert"`;

			string $dup2[] = `duplicate -inputConnections $p1[0]`;
			connectAttr -f ($ramp + ".outColor") ($dup2[0] + ".image");
			connectAttr -f ($dup2[0] + ".outColor") ($lam + ".color");
			string $right[] = `listConnections -s 0 -d 1 -type bump3d $p1[0] `;
			string $oldlam = "";
			if (`objExists $right[0]`)
			{
				string $r[] = `listConnections -s 0 -d 1 -type lambert $right[0]`;
				if (`objExists $r[0]`)
					$oldlam = $r[0];

			}
			if (!`objExists $oldlam`)
				error ("没有需要的lambert");		
			connectAttr -force ($dup[0] + ".outColor") ($oldlam +".transparency");
			connectAttr -force "Doozer_uv_7_projection39.outColor" ($lam +".transparency");
			string $uselessexp[] = `listConnections -s 1 -d 0 -type expression Doozer_uv_7_FaceProjections_file103`;
			if (size($uselessexp))
				delete $uselessexp;
			setAttr "Doozer_uv_7_FaceProjections_file103.useFrameExtension" 0;	
		
			catch(`connectAttr -f woman4223beye_rlambert.outColor Doozer_uv_7_layeredShader1.inputs[27].color`);
			catch(`connectAttr -f woman4223beye_rlambert.outTransparency Doozer_uv_7_layeredShader1.inputs[27].transparency`);
			catch(`connectAttr -f woman4223beye_rlambert.outGlowColor Doozer_uv_7_layeredShader1.inputs[27].glowColor`);
			catch(`connectAttr -f woman4223beye_llambert.outColor Doozer_uv_7_layeredShader1.inputs[28].color`);
			catch(`connectAttr -f woman4223beye_llambert.outTransparency Doozer_uv_7_layeredShader1.inputs[28].transparency`);
			catch(`connectAttr -f woman4223beye_llambert.outGlowColor Doozer_uv_7_layeredShader1.inputs[28].glowColor`);
			
			string $uselessexp[] = `listConnections -s 1 -d 0 -type expression Doozer_uv_7_FaceProjections_file104`;
			if (size($uselessexp))
				delete $uselessexp;

			string $exp  = "Doozer_uv_7_FaceProjections_file104.frameExtension = " + $sl[0] + "|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM.LfEyeShape;\n";
			       $exp += "Doozer_uv_7_file99.frameExtension = " + $sl[0] + "|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM.RtEyeShape;\n";
			       $exp += "if (" + $sl[0] + "|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM.LfEyeShape!=3)\n";
			       $exp += "{\n";
			       $exp += "\tsetAttr -type \"string\" Doozer_uv_7_FaceProjections_file104.fileTextureName \"Z:/Projects/Taowa/Reference/223B/EPISODE_223B_DESIGN/EP_223B_CG_CHAR_VEHICLES/woman#4_223B_MOD/components/ashley_eye_col.tif\";\n";
			       $exp += "}\n";
			       $exp += "else\n";
			       $exp += "{\n";
			       $exp += "\tsetAttr -type \"string\" Doozer_uv_7_FaceProjections_file104.fileTextureName \"" + `getenv "PROJECT_PATH"` + "/Taowa/Production/Asset/character/woman1223b/maps/TEACHER_EYE_COL.0003.iff\";\n";
			       $exp += "}\n";
			       $exp += "if (" + $sl[0] + "|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM.RtEyeShape!=3)\n";
			       $exp += "{\n";
			       $exp += "\tsetAttr -type \"string\" Doozer_uv_7_file99.fileTextureName \"Z:/Projects/Taowa/Reference/223B/EPISODE_223B_DESIGN/EP_223B_CG_CHAR_VEHICLES/woman#4_223B_MOD/components/ashley_eye_col.tif\";\n";
			       $exp += "}\n";
			       $exp += "else \n";
			       $exp += "{\n";
			       $exp += "\tsetAttr -type \"string\" Doozer_uv_7_file99.fileTextureName \"" + `getenv "PROJECT_PATH"` + "/Taowa/Production/Asset/character/woman1223b/maps/TEACHER_EYE_COL.0003.iff\";\n";
			       $exp += "}\n";
			       expression -s $exp -o "" -name "blackeyelid_exp" -ae 1 -uc all;

		}
		
		if (`gmatch $sl[0] "*woman_2223b_Rig*"`)
		{
			if (!`objExists ($sl[0] + "|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM")`)
				error ("层级结构改变了,需要 " + $sl[0] + "|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM");		
			if (!`objExists ($sl[0] + "|Rigged_Element|Face_AttachGroup|EyePosition_Transforms|LfEye_Projections|LT_EYE_BMP_PLA")`)
				error ("层级结构改变了,需要 " + $sl[0] + "|Rigged_Element|Face_AttachGroup|EyePosition_Transforms|LfEye_Projections|LT_EYE_BMP_PLA");		
			if (!`objExists ($sl[0] + "|Rigged_Element|Face_AttachGroup|EyePosition_Transforms|LfEye_Projections|LT_EYE_MAT_PLA")`)
				error ("层级结构改变了,需要 " + $sl[0] + "|Rigged_Element|Face_AttachGroup|EyePosition_Transforms|LfEye_Projections|LT_EYE_MAT_PLA");		
			if (!`objExists ($sl[0] + "|Rigged_Element|Face_AttachGroup|EyePosition_Transforms|RtEye_Projections|RT_EYE_BMP_PLA")`)
				error ("层级结构改变了,需要 " + $sl[0] + "|Rigged_Element|Face_AttachGroup|EyePosition_Transforms|RtEye_Projections|RT_EYE_BMP_PLA");		
			if (!`objExists ($sl[0] + "|Rigged_Element|Face_AttachGroup|EyePosition_Transforms|RtEye_Projections|RT_EYE_MAT_PLA")`)
				error ("层级结构改变了,需要 " + $sl[0] + "|Rigged_Element|Face_AttachGroup|EyePosition_Transforms|RtEye_Projections|RT_EYE_MAT_PLA");		

			if (!`objExists ($sl[0] + "|Rigged_Element|Face_AttachGroup|EyePosition_Transforms|EYE_position_Anim|RT_EYECOLORTransform|R_EYE_position_Anim|R_clour_trans|RtPupil|RT_EYE_PUPIL")`)
				error ("层级结构改变了,需要 " + $sl[0] + "|Rigged_Element|Face_AttachGroup|EyePosition_Transforms|EYE_position_Anim|RT_EYECOLORTransform|R_EYE_position_Anim|R_clour_trans|RtPupil|RT_EYE_PUPIL");		
			if (!`objExists ($sl[0] + "|Rigged_Element|Face_AttachGroup|EyePosition_Transforms|EYE_position_Anim|LF_EYECOLORTransform|L_EYE_position_Anim|L_clour_trans|LfPupil|LT_EYE_PUPIL")`)
				error ("层级结构改变了,需要 " + $sl[0] + "|Rigged_Element|Face_AttachGroup|EyePosition_Transforms|EYE_position_Anim|LF_EYECOLORTransform|L_EYE_position_Anim|L_clour_trans|LfPupil|LT_EYE_PUPIL");		
			
			//left eye
			string $p1[] = `listConnections -type projection ($sl[0] + "|Rigged_Element|Face_AttachGroup|EyePosition_Transforms|LfEye_Projections|LT_EYE_BMP_PLA")`;
			if (!`objExists $p1[0]`)
				error "没有相应节点";		
			string $proj[] = `listConnections -type projection ($sl[0] + "|Rigged_Element|Face_AttachGroup|EyePosition_Transforms|LfEye_Projections|LT_EYE_MAT_PLA")`;
			if (!`objExists $proj[0]`)
				error "没有相应节点";		
			string $dup[] = `duplicate -inputConnections $p1[0]`;
			string $md[] = `listConnections -type file $p1[0]`;
			string $dup1[] = `duplicate -inputConnections $md[0]`;
			connectAttr -f ($dup1[0] + ".outColor") ($dup[0]+".image");
			string $lam = `shadingNode -asShader lambert -name "woman2223beye_llambert"`;

			string $dup2[] = `duplicate -inputConnections $p1[0]`;
			string $ramp = `shadingNode -asTexture ramp`;
			removeMultiInstance -break true ($ramp + ".colorEntryList[1]");
			removeMultiInstance -break true ($ramp + ".colorEntryList[2]");
			setAttr ($ramp + ".colorEntryList[0].color") -type double3 0.71 0.494 0.247 ;
			connectAttr -f ($ramp + ".outColor") ($dup2[0] + ".image");
			connectAttr -f ($dup2[0] + ".outColor") ($lam + ".color");
			string $right[] = `listConnections -s 0 -d 1 -type bump3d $p1[0] `;
			string $oldlam = "";
			if (`objExists $right[0]`)
			{
				string $r[] = `listConnections -s 0 -d 1 -type lambert $right[0]`;
				if (`objExists $r[0]`)
					$oldlam = $r[0];

			}
			if (!`objExists $oldlam`)
				error ("没有需要的lambert");		
			connectAttr -force ($dup[0]+ ".outColor") ($oldlam + ".transparency");
			connectAttr -force ($proj[0]+ ".outColor") ($lam + ".transparency");
			string $expfile[] = `listConnections -s 1 -d 0 -type file $proj[0]`;
			string $uselessexp[] = `listConnections -s 1 -d 0 -type expression $expfile[0]`;
			if (size($uselessexp))
				delete $uselessexp;
			setAttr ($expfile[0] + ".useFrameExtension") 0;	
			
	
			//right eye
			string $p1[] = `listConnections -type projection ($sl[0] + "|Rigged_Element|Face_AttachGroup|EyePosition_Transforms|RtEye_Projections|RT_EYE_BMP_PLA")`;
			if (!`objExists $p1[0]`)
				error "没有相应节点";		
			string $proj[] = `listConnections -type projection ($sl[0] + "|Rigged_Element|Face_AttachGroup|EyePosition_Transforms|RtEye_Projections|RT_EYE_MAT_PLA")`;
			if (!`objExists $proj[0]`)
				error "没有相应节点";		
			string $dup[] = `duplicate -inputConnections $p1[0]`;
			string $md[] = `listConnections -type file $p1[0]`;
			string $dup1[] = `duplicate -inputConnections $md[0]`;
			connectAttr -f ($dup1[0] + ".outColor") ($dup[0]+".image");
			string $lam = `shadingNode -asShader lambert -name "woman2223beye_rlambert"`;

			string $dup2[] = `duplicate -inputConnections $p1[0]`;
			connectAttr -f ($ramp + ".outColor") ($dup2[0] + ".image");
			connectAttr -f ($dup2[0] + ".outColor") ($lam + ".color");
			string $right[] = `listConnections -s 0 -d 1 -type bump3d $p1[0] `;
			string $oldlam = "";
			if (`objExists $right[0]`)
			{
				string $r[] = `listConnections -s 0 -d 1 -type lambert $right[0]`;
				if (`objExists $r[0]`)
					$oldlam = $r[0];

			}
			if (!`objExists $oldlam`)
				error ("没有需要的lambert");		
			connectAttr -force ($dup[0]+ ".outColor") ($oldlam +".transparency");
			connectAttr -force ($proj[0]+ ".outColor") ($lam +".transparency");
			string $expfile[] = `listConnections -s 1 -d 0 -type file $proj[0]`;
			string $uselessexp[] = `listConnections -s 1 -d 0 -type expression $expfile[0]`;
			if (size($uselessexp))
				delete $uselessexp;
			setAttr ($expfile[0] + ".useFrameExtension") 0;	

			catch(`connectAttr -f woman2223beye_rlambert.outColor RIG_HTH_Women1_UV_02_12J_V12_layeredShader12.inputs[35].color`);
			catch(`connectAttr -f woman2223beye_rlambert.outTransparency RIG_HTH_Women1_UV_02_12J_V12_layeredShader12.inputs[35].transparency`);
			catch(`connectAttr -f woman2223beye_rlambert.outGlowColor RIG_HTH_Women1_UV_02_12J_V12_layeredShader12.inputs[35].glowColor`);
			catch(`connectAttr -f woman2223beye_llambert.outColor RIG_HTH_Women1_UV_02_12J_V12_layeredShader12.inputs[36].color`);
			catch(`connectAttr -f woman2223beye_llambert.outTransparency RIG_HTH_Women1_UV_02_12J_V12_layeredShader12.inputs[36].transparency`);
			catch(`connectAttr -f woman2223beye_llambert.outGlowColor RIG_HTH_Women1_UV_02_12J_V12_layeredShader12.inputs[36].glowColor`);
			
			string $lpj[] = `listConnections -s 0 -d 1 -type projection ($sl[0] + "|Rigged_Element|Face_AttachGroup|EyePosition_Transforms|EYE_position_Anim|LF_EYECOLORTransform|L_EYE_position_Anim|L_clour_trans|LfPupil|LT_EYE_PUPIL")`;
			string $lefile[] = `listConnections -s 1 -d 0 -type file $lpj[0]`;
			string $rpj[] = `listConnections -s 0 -d 1 -type projection ($sl[0] + "|Rigged_Element|Face_AttachGroup|EyePosition_Transforms|EYE_position_Anim|RT_EYECOLORTransform|R_EYE_position_Anim|R_clour_trans|RtPupil|RT_EYE_PUPIL")`;
			string $refile[] = `listConnections -s 1 -d 0 -type file $rpj[0]`;

			string $exp  = strip($lefile[0]) + ".frameExtension = " + $sl[0] + "|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM.LfEyeShape;\n";
			       $exp += strip($refile[0]) + ".frameExtension = " + $sl[0] + "|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM.RtEyeShape;\n";
			       $exp += "if (" + $sl[0] + "|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM.LfEyeShape!=3)\n";
			       $exp += "{\n";
			       $exp += "\tsetAttr -type \"string\" " + strip($lefile[0]) + ".fileTextureName \"Z:/Projects/Taowa/Reference/223B/EPISODE_223B_DESIGN/EP_223B_CG_CHAR_VEHICLES/woman#2_223B_MOD/components/VIOLETEYES4.PIC\";\n";
			       $exp += "}\n";
			       $exp += "else\n";
			       $exp += "{\n";
			       $exp += "\tsetAttr -type \"string\" " + strip($lefile[0]) + ".fileTextureName \"" + `getenv "PROJECT_PATH"` + "/Taowa/Production/Asset/character/woman1223b/maps/TEACHER_EYE_COL.0003.iff\";\n";
			       $exp += "}\n";
			       $exp += "if (" + $sl[0] + "|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM.RtEyeShape!=3)\n";
			       $exp += "{\n";
			       $exp += "\tsetAttr -type \"string\" " + strip($refile[0]) + ".fileTextureName \"Z:/Projects/Taowa/Reference/223B/EPISODE_223B_DESIGN/EP_223B_CG_CHAR_VEHICLES/woman#2_223B_MOD/components/VIOLETEYES4.PIC\";\n";
			       $exp += "}\n";
			       $exp += "else \n";
			       $exp += "{\n";
			       $exp += "\tsetAttr -type \"string\" " + strip($refile[0]) + ".fileTextureName \"" + `getenv "PROJECT_PATH"` + "/Taowa/Production/Asset/character/woman1223b/maps/TEACHER_EYE_COL.0003.iff\";\n";
			       $exp += "}\n";
			       expression -s $exp -o "" -name "blackeyelid_exp" -ae 1 -uc all;

		}
	
		if (`gmatch $sl[0] "*MapMaker_223B_Rig*"`)
		{
			if (!`objExists ($sl[0] + "|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM")`)
				error ("层级结构改变了,需要 " + $sl[0] + "|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM");		

			if (!`objExists ($sl[0] + "|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM|Joint_Head|Leyes_texture|place3dTexture3")`)
				error ("层级结构改变了,需要 " + $sl[0] + "|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM|Joint_Head|Leyes_texture|place3dTexture3");		
			
			if (!`objExists ($sl[0] + "|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM|Joint_Head|Reyes_texture|place3dTexture5")`)
				error ("层级结构改变了,需要 " + $sl[0] + "|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM|Joint_Head|Reyes_texture|place3dTexture5");		
			
			
			setAttr -type "string" EubieTuxido201B_MOD_pack_Doozer_uv_7_FaceProjections_file103.fileTextureName (`getenv "PROJECT_PATH"` + "/Taowa/Production/Asset/character/mapmaker223bmodpack/maps/EUBIEEYELID_MAT.0001.iff");
			setAttr -type "string" EubieTuxido201B_MOD_pack_Doozer_uv_7_FaceProjections_file113.fileTextureName (`getenv "PROJECT_PATH"` + "/Taowa/Production/Asset/character/mapmaker223bmodpack/maps/EUBIEEYELID_MAT.0001.iff");
			connectAttr -f ($sl[0] + "|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM|Joint_Head|Leyes_texture|place3dTexture3.worldInverseMatrix[0]") EubieTuxido201B_MOD_pack_Doozer_uv_7_projection40.placementMatrix;
			connectAttr -f ($sl[0] + "|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM|Joint_Head|Reyes_texture|place3dTexture5.worldInverseMatrix[0]") EubieTuxido201B_MOD_pack_Doozer_uv_7_projection53.placementMatrix;
			
			string $uselessexp[] = `listConnections -s 1 -d 0 -type expression EubieTuxido201B_MOD_pack_Doozer_uv_7_FaceProjections_file110`;
			if (size($uselessexp))
				delete $uselessexp;
			string $uselessexp[] = `listConnections -s 1 -d 0 -type expression EubieTuxido201B_MOD_pack_Doozer_uv_7_FaceProjections_file117`;
			if (size($uselessexp))
				delete $uselessexp;
			string $exp  = "EubieTuxido201B_MOD_pack_Doozer_uv_7_FaceProjections_file110.frameExtension = " + $sl[0] + "|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM.LfEyeShape;\n";
			       $exp += "EubieTuxido201B_MOD_pack_Doozer_uv_7_FaceProjections_file117.frameExtension = " + $sl[0] + "|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM.RtEyeShape;\n";
			       $exp += "if (" + $sl[0] + "|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM.LfEyeShape!=3)\n";
			       $exp += "{\n";
			       $exp += "\tsetAttr -type \"string\" EubieTuxido201B_MOD_pack_Doozer_uv_7_FaceProjections_file110.fileTextureName \"" + `getenv "PROJECT_PATH"` + "/TaoWa/Production/Asset/character/mapmaker223bmodpack/maps/CHARMapMaker223B_EYE_COL.iff\";\n";
			       $exp += "}\n";
			       $exp += "else\n";
			       $exp += "{\n";
			       $exp += "\tsetAttr -type \"string\" EubieTuxido201B_MOD_pack_Doozer_uv_7_FaceProjections_file110.fileTextureName \"" + `getenv "PROJECT_PATH"` + "/Taowa/Production/Asset/character/woman1223b/maps/TEACHER_EYE_COL.0003.iff\";\n";
			       $exp += "}\n";
			       $exp += "if (" + $sl[0] + "|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM.RtEyeShape!=3)\n";
			       $exp += "{\n";
			       $exp += "\tsetAttr -type \"string\" EubieTuxido201B_MOD_pack_Doozer_uv_7_FaceProjections_file117.fileTextureName \"" + `getenv "PROJECT_PATH"` + "/TaoWa/Production/Asset/character/mapmaker223bmodpack/maps/CHARMapMaker223B_EYE_COL.iff\";\n";
			       $exp += "}\n";
			       $exp += "else \n";
			       $exp += "{\n";
			       $exp += "\tsetAttr -type \"string\" EubieTuxido201B_MOD_pack_Doozer_uv_7_FaceProjections_file117.fileTextureName \"" + `getenv "PROJECT_PATH"` + "/Taowa/Production/Asset/character/woman1223b/maps/TEACHER_EYE_COL.0003.iff\";\n";
			       $exp += "}\n";
			       expression -s $exp -o "" -name "blackeyelid_exp" -ae 1 -uc all;
		}
		if (`gmatch $sl[0] "*Reporter_Rig*"`)
		{
			if (!`objExists ($sl[0] + "|Reporter|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM")`)
				error ("层级结构改变了,需要 " + $sl[0] + "|Reporter|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM");		

			if (!`objExists ($sl[0] + "|Reporter|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM|woman_08Joint_Head|LfEye_Projections1|LfEye_Proj1")`)
				error ("层级结构改变了,需要 " + $sl[0] + "|Reporter|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM|woman_08Joint_Head|LfEye_Projections1|LfEye_Proj1");		
			
			if (!`objExists ($sl[0] + "|Reporter|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM|woman_08Joint_Head|RtEye_Projections1|RtEye_Proj1")`)
				error ("层级结构改变了,需要 " + $sl[0] + "|Reporter|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM|woman_08Joint_Head|RtEye_Projections1|RtEye_Proj1");		
			
			// left eye
			string $eyeShadow_lt[] = `ls -type file "FaceProjections_file109"`;
			string $eyeShadow_pro_lt[] = `ls -type projection "Bitty_OldFile_projection46"`;
			string $LfEyeBall[] = `ls -type lambert "LfEyeBall"`;

			string $dup1[] = `duplicate -inputConnections $eyeShadow_lt[0]`;
			setAttr -type "string" ($dup1[0]+".fileTextureName") (`getenv "PROJECT_PATH"` + "/TaoWa/Production/Asset/character/reporter225b/maps/ASIAN_EYE_MAT.0004.iff");
			setAttr ($dup1[0]+".useFrameExtension") 0;

			string $pi_colorfile = `shadingNode -asTexture file -n "pi_colorfile"`;
			setAttr -type "string" ($pi_colorfile+".fileTextureName") (`getenv "PROJECT_PATH"` + "/TaoWa/Production/Asset/character/reporter225b/maps/BANKER_FACE_COL.iff");

			string $dup2[] = `duplicate -inputConnections $eyeShadow_pro_lt[0]`;
			string $dup3[] = `duplicate -inputConnections $eyeShadow_pro_lt[0]`;
			string $dup4[] = `duplicate -inputConnections $LfEyeBall[0]`;
			setAttr ($dup4[0]+".diffuse") 0.72;

			connectAttr -f ($dup1[0]+".outColor") ($dup2[0]+".image");
			connectAttr -f ($dup2[0]+".outColor") ($dup4[0]+".transparency");
			connectAttr -f ($pi_colorfile+".outColor") ($dup3[0]+".defaultColor");
			connectAttr -f ($pi_colorfile+".outColor") ($dup3[0]+".image");
			connectAttr -f ($dup3[0]+".outColor") ($dup4[0]+".color");

			defaultNavigation -force true -connectToExisting -source $dup4[0] -destination "Face";

			// right eye
			string $eyeShadow_rt[] = `ls -type file "Bitty_OldFile_file111"`;
			string $eyeShadow_pro_rt[] = `ls -type projection "Bitty_OldFile_projection48"`;
			string $RfEyeBall[] = `ls -type lambert "RtEyeBall"`;
			

			string $dup5[] = `duplicate -inputConnections $eyeShadow_rt[0]`;
			setAttr -type "string" ($dup5[0]+".fileTextureName") (`getenv "PROJECT_PATH"` + "/TaoWa/Production/Asset/character/reporter225b/maps/ASIAN_EYE_MAT.0004.iff");
			setAttr ($dup5[0]+".useFrameExtension") 0;

			string $dup6[] = `duplicate -inputConnections $eyeShadow_pro_rt[0]`;
			string $dup7[] = `duplicate -inputConnections $eyeShadow_pro_rt[0]`;
			string $dup8[] = `duplicate -inputConnections $RfEyeBall[0]`;
			setAttr ($dup8[0]+".diffuse") 0.72;

			connectAttr -f ($dup5[0]+".outColor") ($dup6[0]+".image");
			connectAttr -f ($dup6[0]+".outColor") ($dup8[0]+".transparency");
			connectAttr -f ($pi_colorfile+".outColor") ($dup7[0]+".defaultColor");
			connectAttr -f ($pi_colorfile+".outColor") ($dup7[0]+".image");
			connectAttr -f ($dup7[0]+".outColor") ($dup8[0]+".color");

			defaultNavigation -force true -connectToExisting -source $dup8[0] -destination "Face";

			select -r "Face";

			string $exp  = "FaceProjections_file110.frameExtension = " + $sl[0] + "|Reporter|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM.LfEyeShape;\n";
			       $exp += "Bitty_OldFile_file112.frameExtension = " + $sl[0] + "|Reporter|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM.RtEyeShape;\n";
			       $exp += "if (" + $sl[0] + "|Reporter|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM.LfEyeShape!=3)\n";
			       $exp += "{\n";
			       $exp += "\tsetAttr -type \"string\" FaceProjections_file110.fileTextureName \"" + `getenv "PROJECT_PATH"` + "/TaoWa/Production/Asset/character/reporter225b/maps/ReporterEye_COL.iff\";\n";
			       $exp += "}\n";
			       $exp += "else\n";
			       $exp += "{\n";
			       $exp += "\tsetAttr -type \"string\" FaceProjections_file110.fileTextureName \"" + `getenv "PROJECT_PATH"` + "/Taowa/Production/Asset/character/woman1223b/maps/TEACHER_EYE_COL.0003.iff\";\n";
			       $exp += "}\n";
			       $exp += "if (" + $sl[0] + "|Reporter|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM.RtEyeShape!=3)\n";
			       $exp += "{\n";
			       $exp += "\tsetAttr -type \"string\" Bitty_OldFile_file112.fileTextureName \"" + `getenv "PROJECT_PATH"` + "/TaoWa/Production/Asset/character/reporter225b/maps/ReporterEye_COL.iff\";\n";
			       $exp += "}\n";
			       $exp += "else \n";
			       $exp += "{\n";
			       $exp += "\tsetAttr -type \"string\" Bitty_OldFile_file112.fileTextureName \"" + `getenv "PROJECT_PATH"` + "/Taowa/Production/Asset/character/woman1223b/maps/TEACHER_EYE_COL.0003.iff\";\n";
			       $exp += "}\n";

			       expression -s $exp -o "" -name "blackeyelid_exp" -ae 1 -uc all;
		}

		if (`gmatch $sl[0] "*edubie_Rig*"`)
		{
			string $RT_EYE_COL2[] = `ls -type file "RT_EYE_COL4"`;
			if (size($RT_EYE_COL2))
			{
				source generateChannelMenu.mel;
				rename RT_EYE_COL4 RT_EYE_COL2;
				CBdeleteConnection edubie_Rig|Rigged_Element|Arm_group|LfArm_AttachGroup|LfArm_Transforms|Joint_LfArmTwist|Joint_LfArmA|Joint_LfArmB|Joint_LfArmC|Joint_LfArmD|Joint_LfArmE|Joint_LfArmF|Joint_LfWrist|Joint_LfWrist_orientConstraint1.LfWrist_ANIMW0;
				CBdeleteConnection edubie_Rig|Rigged_Element|Arm_group|LfArm_BodyTwist|LfArm_BodyTwist_orientConstraint1.Joint_LfArmFW0;
				CBdeleteConnection edubie_Rig|Rigged_Element|Arm_group|LfArm_BodyTwist|LfArm_BodyTwist_orientConstraint1.Lf_Default_ConstrainW1;
				CBdeleteConnection edubie_Rig|Rigged_Element|Arm_group|RtArm_BodyTwist|RtArm_BodyTwist_orientConstraint1.Joint_RtArmFW0;
				CBdeleteConnection edubie_Rig|Rigged_Element|Arm_group|RtArm_BodyTwist|RtArm_BodyTwist_orientConstraint1.Rt_Default_ConstrainW1;
				CBdeleteConnection edubie_Rig|Rigged_Element|Arm_group|RtArm_AttachGroup|RtArm_Transforms|Joint_RtArmTwist|Joint_RtArmA|Joint_RtArmB|Joint_RtArmC|Joint_RtArmD|Joint_RtArmE|Joint_RtArmF|Joint_RtWrist|Joint_RtWrist_orientConstraint1.RtWrist_ANIMW0;


				CBdeleteConnection blendShape_BodyLattice.Squash;
				CBdeleteConnection blendShape_BodyLattice.Stretch;

				CBdeleteConnection edubie_Rig|Rigged_Element|Arm_group|LfArm_AttachGroup.visibility;
				CBdeleteConnection edubie_Rig|Rigged_Element|Arm_group|LfArm_Geometry.visibility;
				CBdeleteConnection edubie_Rig|World_ANIM|LfArmWorld_Transforms.visibility;
				CBdeleteConnection edubie_Rig|Rigged_Element|Hands|Lf_Hand.visibility;
				CBdeleteConnection edubie_Rig|Rigged_Element|Arm_group|RtArm_AttachGroup.visibility;
				CBdeleteConnection edubie_Rig|Rigged_Element|Arm_group|RtArm_Geometry.visibility;
				CBdeleteConnection edubie_Rig|World_ANIM|RtArmWorld_Transforms.visibility;
				CBdeleteConnection edubie_Rig|Rigged_Element|Hands|Rt_Hand.visibility;

				CBdeleteConnection edubie_Rig|Rigged_Element|mouth_displaynode|mouth_shape1.visibility;
				CBdeleteConnection edubie_Rig|Rigged_Element|mouth_displaynode|mouth_shape2.visibility;
				CBdeleteConnection edubie_Rig|Rigged_Element|mouth_displaynode|mouth_shape3.visibility;
				CBdeleteConnection edubie_Rig|Rigged_Element|mouth_displaynode|mouth_shape4.visibility;
				CBdeleteConnection edubie_Rig|Rigged_Element|mouth_displaynode|mouth_shape5.visibility;
				CBdeleteConnection edubie_Rig|Rigged_Element|mouth_displaynode|mouth_shape6.visibility;
				CBdeleteConnection edubie_Rig|Rigged_Element|mouth_displaynode|mouth_shape7.visibility;
				CBdeleteConnection edubie_Rig|Rigged_Element|mouth_displaynode|mouth_shape8.visibility;
				CBdeleteConnection edubie_Rig|Rigged_Element|mouth_displaynode|mouth_shape9.visibility;
				CBdeleteConnection edubie_Rig|Rigged_Element|mouth_displaynode|mouth_shape10.visibility;
				CBdeleteConnection edubie_Rig|Rigged_Element|mouth_displaynode|mouth_shape11.visibility;
				CBdeleteConnection edubie_Rig|Rigged_Element|mouth_displaynode|mouth_shape12.visibility;
				CBdeleteConnection edubie_Rig|Rigged_Element|mouth_displaynode|mouth_shape13.visibility;
				CBdeleteConnection edubie_Rig|Rigged_Element|mouth_displaynode|mouth_shape14.visibility;


				CBdeleteConnection edubie_Rig|Rigged_Element|Arm_group|LfArm_AttachGroup|LfArm_Transforms|Joint_LfArmTwist|Joint_LfArmA|Joint_LfArmB|Joint_LfArmC|Joint_LfArmD|Joint_LfArmE|Joint_LfArmF.rotateX;
				CBdeleteConnection edubie_Rig|Rigged_Element|Arm_group|LfArm_AttachGroup|LfArm_Transforms|Joint_LfArmTwist|Joint_LfArmA|Joint_LfArmB|Joint_LfArmC|Joint_LfArmD|Joint_LfArmE|Joint_LfArmF.rotateY;
				CBdeleteConnection edubie_Rig|Rigged_Element|Arm_group|LfArm_AttachGroup|LfArm_Transforms|Joint_LfArmTwist|Joint_LfArmA|Joint_LfArmB|Joint_LfArmC|Joint_LfArmD|Joint_LfArmE|Joint_LfArmF.rotateZ;
				CBdeleteConnection edubie_Rig|Rigged_Element|Arm_group|RtArm_AttachGroup|RtArm_Transforms|Joint_RtArmTwist|Joint_RtArmA|Joint_RtArmB|Joint_RtArmC|Joint_RtArmD|Joint_RtArmE|Joint_RtArmF.rotateX;
				CBdeleteConnection edubie_Rig|Rigged_Element|Arm_group|RtArm_AttachGroup|RtArm_Transforms|Joint_RtArmTwist|Joint_RtArmA|Joint_RtArmB|Joint_RtArmC|Joint_RtArmD|Joint_RtArmE|Joint_RtArmF.rotateY;
				CBdeleteConnection edubie_Rig|Rigged_Element|Arm_group|RtArm_AttachGroup|RtArm_Transforms|Joint_RtArmTwist|Joint_RtArmA|Joint_RtArmB|Joint_RtArmC|Joint_RtArmD|Joint_RtArmE|Joint_RtArmF.rotateZ;

				CBdeleteConnection RT_EYE_COL2.frameExtension;
				CBdeleteConnection RT_EYE_MAT2.frameExtension;
				CBdeleteConnection RT_EYE_BMP2.frameExtension;
				CBdeleteConnection LT_EYE_COL2.frameExtension;
				CBdeleteConnection LT_EYE_MAT2.frameExtension;
				CBdeleteConnection LT_EYE_BMP2.frameExtension;
				CBdeleteConnection MOUTH_COL2.frameExtension;
				CBdeleteConnection MOUTH_MAT2.frameExtension;
				CBdeleteConnection MOUTH_BMP2.frameExtension;
				CBdeleteConnection LT_EYELID_MAT2.frameExtension;
				CBdeleteConnection LT_EYELID_BMP2.frameExtension;
				CBdeleteConnection RT_EYELID_MAT2.frameExtension;
				CBdeleteConnection RT_EYELID_BMP2.frameExtension;

				// embed the expression
				string $exp = "if(edubie_Rig|Rigged_Element|Arm_group|LfArm_BodyTwist|Lf_comp_val|LfWrist_ANIM.Body_World==1)"
						+"\n{"
							+"\nedubie_Rig|Rigged_Element|Arm_group|LfArm_AttachGroup|LfArm_Transforms|Joint_LfArmTwist|Joint_LfArmA|Joint_LfArmB|Joint_LfArmC|Joint_LfArmD|Joint_LfArmE|Joint_LfArmF|Joint_LfWrist|Joint_LfWrist_orientConstraint1.LfWrist_ANIMW0=0;"
							+"\nedubie_Rig|Rigged_Element|Arm_group|LfArm_BodyTwist|LfArm_BodyTwist_orientConstraint1.Joint_LfArmFW0=0;"
							+"\nedubie_Rig|Rigged_Element|Arm_group|LfArm_BodyTwist|LfArm_BodyTwist_orientConstraint1.Lf_Default_ConstrainW1=1;"
						+"\n}\n"
						+"else"
						+"\n{"
							+"\nedubie_Rig|Rigged_Element|Arm_group|LfArm_AttachGroup|LfArm_Transforms|Joint_LfArmTwist|Joint_LfArmA|Joint_LfArmB|Joint_LfArmC|Joint_LfArmD|Joint_LfArmE|Joint_LfArmF|Joint_LfWrist|Joint_LfWrist_orientConstraint1.LfWrist_ANIMW0=1;"
							+"\nedubie_Rig|Rigged_Element|Arm_group|LfArm_BodyTwist|LfArm_BodyTwist_orientConstraint1.Joint_LfArmFW0=1;"
							+"\nedubie_Rig|Rigged_Element|Arm_group|LfArm_BodyTwist|LfArm_BodyTwist_orientConstraint1.Lf_Default_ConstrainW1=0;"
						+"\n}"

						//------------

						+"\nif(edubie_Rig|Rigged_Element|Arm_group|RtArm_BodyTwist|Rt_comp_val|RtWrist_ANIM.Body_World==1)"
						+"\n{"
							+"\n|edubie_Rig|Rigged_Element|Arm_group|RtArm_AttachGroup|RtArm_Transforms|Joint_RtArmTwist|Joint_RtArmA|Joint_RtArmB|Joint_RtArmC|Joint_RtArmD|Joint_RtArmE|Joint_RtArmF|Joint_RtWrist|Joint_RtWrist_orientConstraint1.RtWrist_ANIMW0=0;"
							+"\nedubie_Rig|Rigged_Element|Arm_group|RtArm_BodyTwist|RtArm_BodyTwist_orientConstraint1.Joint_RtArmFW0=0;"
							+"\nedubie_Rig|Rigged_Element|Arm_group|RtArm_BodyTwist|RtArm_BodyTwist_orientConstraint1.Rt_Default_ConstrainW1=1;"
						+"\n}\n"
						+"else"
						+"\n{"
							+"\n|edubie_Rig|Rigged_Element|Arm_group|RtArm_AttachGroup|RtArm_Transforms|Joint_RtArmTwist|Joint_RtArmA|Joint_RtArmB|Joint_RtArmC|Joint_RtArmD|Joint_RtArmE|Joint_RtArmF|Joint_RtWrist|Joint_RtWrist_orientConstraint1.RtWrist_ANIMW0=1;"
							+"\nedubie_Rig|Rigged_Element|Arm_group|RtArm_BodyTwist|RtArm_BodyTwist_orientConstraint1.Joint_RtArmFW0=1;"
							+"\nedubie_Rig|Rigged_Element|Arm_group|RtArm_BodyTwist|RtArm_BodyTwist_orientConstraint1.Rt_Default_ConstrainW1=0;"
						+"\n}"

						//------------

						+"\nif(edubie_Rig|World_ANIM|Main_ANIM.SquashStretch < 0)"
						+"\n{"
							+"\nblendShape_BodyLattice.Squash=-(edubie_Rig|World_ANIM|Main_ANIM.SquashStretch/10);"
						+"\n}\n"
						+"else"
						+"\n{"
							+"\nblendShape_BodyLattice.Squash=0;"
						+"\n}"
						+"if(edubie_Rig|World_ANIM|Main_ANIM.SquashStretch > 0)"
						+"\n{"
							+"\nblendShape_BodyLattice.Stretch=(edubie_Rig|World_ANIM|Main_ANIM.SquashStretch/10);"
						+"\n}\n"
						+"else"
						+"\n{"
							+"\nblendShape_BodyLattice.Stretch=0;"
						+"\n}"

						//--------------

						+"if(edubie_Rig|World_ANIM|Main_ANIM|Main_Y|Top_ANIM.LfArmInOut==1)"
						+"\n{"
							+"\nedubie_Rig|Rigged_Element|Arm_group|LfArm_AttachGroup.visibility=1;"
							+"\nedubie_Rig|Rigged_Element|Arm_group|LfArm_Geometry.visibility=1;"
							+"\nedubie_Rig|World_ANIM|LfArmWorld_Transforms.visibility=1;"
							+"\nedubie_Rig|Rigged_Element|Hands|Lf_Hand.visibility=0;"
						+"\n}\n"
						+"else"
						+"\n{"
							+"\nedubie_Rig|Rigged_Element|Arm_group|LfArm_AttachGroup.visibility=0;"
							+"\nedubie_Rig|Rigged_Element|Arm_group|LfArm_Geometry.visibility=0;"
							+"\nedubie_Rig|World_ANIM|LfArmWorld_Transforms.visibility=0;"
							+"\nedubie_Rig|Rigged_Element|Hands|Lf_Hand.visibility=1;"
						+"\n}"

						//--------------

						+"if(edubie_Rig|World_ANIM|Main_ANIM|Main_Y|Top_ANIM.RtArmInOut==1)"
						+"\n{"
							+"\nedubie_Rig|Rigged_Element|Arm_group|RtArm_AttachGroup.visibility=1;"
							+"\nedubie_Rig|Rigged_Element|Arm_group|RtArm_Geometry.visibility=1;"
							+"\nedubie_Rig|World_ANIM|RtArmWorld_Transforms.visibility=1;"
							+"\nedubie_Rig|Rigged_Element|Hands|Rt_Hand.visibility=0;"
						+"\n}\n"
						+"else"
						+"\n{"
							+"\nedubie_Rig|Rigged_Element|Arm_group|RtArm_AttachGroup.visibility=0;"
							+"\nedubie_Rig|Rigged_Element|Arm_group|RtArm_Geometry.visibility=0;"
							+"\nedubie_Rig|World_ANIM|RtArmWorld_Transforms.visibility=0;"
							+"\nedubie_Rig|Rigged_Element|Hands|Rt_Hand.visibility=1;"
						+"\n}"

						//--------------1~14

						+"if(edubie_Rig|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM.MouthShape==1)"
						+"\n{"
							+"\nedubie_Rig|Rigged_Element|mouth_displaynode|mouth_shape1.visibility= 1;"

						+"\n}\n"
						+"else"
						+"\n{"
							+"\nedubie_Rig|Rigged_Element|mouth_displaynode|mouth_shape1.visibility= 0;"
						+"\n}"
						+"if(edubie_Rig|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM.MouthShape==2)"
						+"\n{"
							+"edubie_Rig|Rigged_Element|mouth_displaynode|mouth_shape2.visibility= 1;"

						+"\n}\n"
						+"else"
						+"\n{"
							+"\nedubie_Rig|Rigged_Element|mouth_displaynode|mouth_shape2.visibility= 0;"
						+"\n}"
						+"if(edubie_Rig|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM.MouthShape==3)"
						+"\n{"
							+"\nedubie_Rig|Rigged_Element|mouth_displaynode|mouth_shape3.visibility= 1;"

						+"\n}\n"
						+"else"
						+"\n{"
							+"\nedubie_Rig|Rigged_Element|mouth_displaynode|mouth_shape3.visibility= 0;"
						+"\n}"
						+"if(edubie_Rig|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM.MouthShape==4)"
						+"\n{"
							+"\nedubie_Rig|Rigged_Element|mouth_displaynode|mouth_shape4.visibility= 1;"

						+"\n}\n"
						+"else"
						+"\n{"
							+"\nedubie_Rig|Rigged_Element|mouth_displaynode|mouth_shape4.visibility= 0;"
						+"\n}"
						+"if(edubie_Rig|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM.MouthShape==5)"
						+"\n{"
							+"\nedubie_Rig|Rigged_Element|mouth_displaynode|mouth_shape5.visibility= 1;"

						+"\n}\n"
						+"else"
						+"\n{"
							+"\nedubie_Rig|Rigged_Element|mouth_displaynode|mouth_shape5.visibility= 0;"
						+"\n}"
						+"if(edubie_Rig|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM.MouthShape==6)"
						+"\n{"
							+"\nedubie_Rig|Rigged_Element|mouth_displaynode|mouth_shape6.visibility= 1;"

						+"\n}\n"
						+"else"
						+"\n{"
							+"\nedubie_Rig|Rigged_Element|mouth_displaynode|mouth_shape6.visibility= 0;"
						+"\n}"
						+"if(edubie_Rig|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM.MouthShape==7)"
						+"\n{"
							+"\nedubie_Rig|Rigged_Element|mouth_displaynode|mouth_shape7.visibility= 1;"

						+"\n}\n"
						+"else"
						+"\n{"
							+"\nedubie_Rig|Rigged_Element|mouth_displaynode|mouth_shape7.visibility= 0;"
						+"\n}"
						+"if(edubie_Rig|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM.MouthShape==8)"
						+"\n{"
							+"\nedubie_Rig|Rigged_Element|mouth_displaynode|mouth_shape8.visibility= 1;"

						+"\n}\n"
						+"else"
						+"\n{"
							+"\nedubie_Rig|Rigged_Element|mouth_displaynode|mouth_shape8.visibility= 0;"
						+"\n}"

						+"if(edubie_Rig|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM.MouthShape==9)"
						+"\n{"
							+"\nedubie_Rig|Rigged_Element|mouth_displaynode|mouth_shape9.visibility= 1;"

						+"\n}\n"
						+"else"
						+"\n{"
							+"\nedubie_Rig|Rigged_Element|mouth_displaynode|mouth_shape9.visibility= 0;"
						+"\n}"
						+"if(edubie_Rig|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM.MouthShape==10)"
						+"\n{"
							+"\nedubie_Rig|Rigged_Element|mouth_displaynode|mouth_shape10.visibility= 1;"

						+"\n}\n"
						+"else"
						+"\n{"
							+"\nedubie_Rig|Rigged_Element|mouth_displaynode|mouth_shape10.visibility= 0;"
						+"\n}"
						+"if(edubie_Rig|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM.MouthShape==11)"
						+"\n{"
							+"\nedubie_Rig|Rigged_Element|mouth_displaynode|mouth_shape11.visibility= 1;"

						+"\n}\n"
						+"else"
						+"\n{"
							+"\nedubie_Rig|Rigged_Element|mouth_displaynode|mouth_shape11.visibility= 0;"
						+"\n}"
						+"if(edubie_Rig|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM.MouthShape==12)"
						+"\n{"
							+"\nedubie_Rig|Rigged_Element|mouth_displaynode|mouth_shape12.visibility= 1;"

						+"\n}\n"
						+"else"
						+"\n{"
							+"\nedubie_Rig|Rigged_Element|mouth_displaynode|mouth_shape12.visibility= 0;"
						+"\n}"
						+"if(edubie_Rig|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM.MouthShape==13)"
						+"\n{"
							+"\nedubie_Rig|Rigged_Element|mouth_displaynode|mouth_shape13.visibility= 1;"

						+"\n}\n"
						+"else"
						+"\n{"
							+"\nedubie_Rig|Rigged_Element|mouth_displaynode|mouth_shape13.visibility= 0;"
						+"\n}"
						+"if(edubie_Rig|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM.MouthShape==14)"
						+"\n{"
							+"\nedubie_Rig|Rigged_Element|mouth_displaynode|mouth_shape14.visibility= 1;"

						+"\n}\n"
						+"else"
						+"\n{"
							+"\nedubie_Rig|Rigged_Element|mouth_displaynode|mouth_shape14.visibility= 0;"
						+"\n}"
			
						//-----------

						+"\nedubie_Rig|Rigged_Element|Arm_group|LfArm_AttachGroup|LfArm_Transforms|Joint_LfArmTwist|Joint_LfArmA|Joint_LfArmB|Joint_LfArmC|Joint_LfArmD|Joint_LfArmE|Joint_LfArmF.rotateX=0;"
						+"\nedubie_Rig|Rigged_Element|Arm_group|LfArm_AttachGroup|LfArm_Transforms|Joint_LfArmTwist|Joint_LfArmA|Joint_LfArmB|Joint_LfArmC|Joint_LfArmD|Joint_LfArmE|Joint_LfArmF.rotateY=0;"
						+"\nedubie_Rig|Rigged_Element|Arm_group|LfArm_AttachGroup|LfArm_Transforms|Joint_LfArmTwist|Joint_LfArmA|Joint_LfArmB|Joint_LfArmC|Joint_LfArmD|Joint_LfArmE|Joint_LfArmF.rotateZ=0;"
						+"\nedubie_Rig|Rigged_Element|Arm_group|RtArm_AttachGroup|RtArm_Transforms|Joint_RtArmTwist|Joint_RtArmA|Joint_RtArmB|Joint_RtArmC|Joint_RtArmD|Joint_RtArmE|Joint_RtArmF.rotateX=0;"
						+"\nedubie_Rig|Rigged_Element|Arm_group|RtArm_AttachGroup|RtArm_Transforms|Joint_RtArmTwist|Joint_RtArmA|Joint_RtArmB|Joint_RtArmC|Joint_RtArmD|Joint_RtArmE|Joint_RtArmF.rotateY=0;"
						+"\nedubie_Rig|Rigged_Element|Arm_group|RtArm_AttachGroup|RtArm_Transforms|Joint_RtArmTwist|Joint_RtArmA|Joint_RtArmB|Joint_RtArmC|Joint_RtArmD|Joint_RtArmE|Joint_RtArmF.rotateZ=0;"
						+"\nRT_EYE_COL2.frameExtension=edubie_Rig|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM.RtEyeShape;"
						+"\nRT_EYE_MAT2.frameExtension=edubie_Rig|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM.RtEyeShape;"
						+"\nRT_EYE_BMP2.frameExtension=edubie_Rig|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM.RtEyeShape;"
						+"\nLT_EYE_COL2.frameExtension=edubie_Rig|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM.LfEyeShape;"
						+"\nLT_EYE_MAT2.frameExtension=edubie_Rig|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM.LfEyeShape;"
						+"\nLT_EYE_BMP2.frameExtension=edubie_Rig|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM.LfEyeShape;"
						+"\nMOUTH_COL2.frameExtension=edubie_Rig|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM.NewMouth;"
						+"\nMOUTH_MAT2.frameExtension=edubie_Rig|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM.NewMouth;"
						+"\nMOUTH_BMP2.frameExtension=edubie_Rig|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM.NewMouth;"
						+"\nLT_EYELID_MAT2.frameExtension=edubie_Rig|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM.RtEyeShape;"
						+"\nLT_EYELID_BMP2.frameExtension=edubie_Rig|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM.RtEyeShape;"
						+"\nRT_EYELID_MAT2.frameExtension=edubie_Rig|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM.RtEyeShape;"
						+"\nRT_EYELID_BMP2.frameExtension=edubie_Rig|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM.RtEyeShape;";

						expression -s $exp -o "" -name "eyelid_exp" -ae 1 -uc all;
				}

			}

			if (`gmatch $sl[0] "*Kip_Rig*"`)
			{			
				if (!`objExists ($sl[0] + "|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM")`)
				{
					error ("层级结构改变了,需要 " + $sl[0] + "|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM");		
				}

				string $RTPUPIL2[] = `ls -l "*RTPUPIL2"`;
				string $RT_EYE_Pro[] = `listConnections -s 0 -d 1 -type  projection $RTPUPIL2[0]`;
				string $RT_EYE_COL[] = `listConnections -s 1 -d 0 -type file $RT_EYE_Pro[0]`;

				if (size($RT_EYE_COL))
				{
					source generateChannelMenu.mel;

					CBdeleteConnection Kip_Rig|Rigged_Element|Arm_group|LfArm_AttachGroup|LfArm_Transforms|Joint_LfArmTwist|Joint_LfArmA|Joint_LfArmB|Joint_LfArmC|Joint_LfArmD|Joint_LfArmE|Joint_LfArmF|Joint_LfWrist|Joint_LfWrist_orientConstraint1.LfWrist_ANIMW0;
					CBdeleteConnection Kip_Rig|Rigged_Element|Arm_group|RtArm_AttachGroup|RtArm_Transforms|Joint_RtArmTwist|Joint_RtArmA|Joint_RtArmB|Joint_RtArmC|Joint_RtArmD|Joint_RtArmE|Joint_RtArmF|Joint_RtWrist|Joint_RtWrist_orientConstraint2.RtWrist_ANIMW0;

					CBdeleteConnection Kip_Rig|Rigged_Element|Arm_group|LfArm_BodyTwist|LfArm_BodyTwist_orientConstraint1.Joint_LfArmFW0;
					CBdeleteConnection Kip_Rig|Rigged_Element|Arm_group|LfArm_BodyTwist|LfArm_BodyTwist_orientConstraint1.Lf_Default_ConstrainW1;
					CBdeleteConnection Kip_Rig|Rigged_Element|Arm_group|RtArm_BodyTwist|RtArm_BodyTwist_orientConstraint1.Joint_RtArmFW0;
					CBdeleteConnection Kip_Rig|Rigged_Element|Arm_group|RtArm_BodyTwist|RtArm_BodyTwist_orientConstraint1.Rt_Default_ConstrainW1;

					CBdeleteConnection blendShape_BodyLattice.Squash;
					CBdeleteConnection blendShape_BodyLattice.Stretch;

					CBdeleteConnection Kip_Rig|Rigged_Element|Arm_group|LfArm_AttachGroup.visibility;
					CBdeleteConnection Kip_Rig|Rigged_Element|Arm_group|LfArm_Geometry.visibility;
					CBdeleteConnection Kip_Rig|World_ANIM|LfArmWorld_Transforms.visibility;
					CBdeleteConnection Kip_Rig|Rigged_Element|Hands|Lf_Hand.visibility;
					CBdeleteConnection Kip_Rig|Rigged_Element|Arm_group|RtArm_AttachGroup.visibility;
					CBdeleteConnection Kip_Rig|Rigged_Element|Arm_group|RtArm_Geometry.visibility;
					CBdeleteConnection Kip_Rig|World_ANIM|RtArmWorld_Transforms.visibility;
					CBdeleteConnection Kip_Rig|Rigged_Element|Hands|Rt_Hand.visibility;

					CBdeleteConnection Kip_Rig|Rigged_Element|mouth_displaynode|mouth_shape1.visibility;
					CBdeleteConnection Kip_Rig|Rigged_Element|mouth_displaynode|mouth_shape2.visibility;
					CBdeleteConnection Kip_Rig|Rigged_Element|mouth_displaynode|mouth_shape3.visibility;
					CBdeleteConnection Kip_Rig|Rigged_Element|mouth_displaynode|mouth_shape4.visibility;
					CBdeleteConnection Kip_Rig|Rigged_Element|mouth_displaynode|mouth_shape5.visibility;
					CBdeleteConnection Kip_Rig|Rigged_Element|mouth_displaynode|mouth_shape6.visibility;
					CBdeleteConnection Kip_Rig|Rigged_Element|mouth_displaynode|mouth_shape7.visibility;
					CBdeleteConnection Kip_Rig|Rigged_Element|mouth_displaynode|mouth_shape8.visibility;
					CBdeleteConnection Kip_Rig|Rigged_Element|mouth_displaynode|mouth_shape9.visibility;
					CBdeleteConnection Kip_Rig|Rigged_Element|mouth_displaynode|mouth_shape10.visibility;
					CBdeleteConnection Kip_Rig|Rigged_Element|mouth_displaynode|mouth_shape11.visibility;
					CBdeleteConnection Kip_Rig|Rigged_Element|mouth_displaynode|mouth_shape12.visibility;
					CBdeleteConnection Kip_Rig|Rigged_Element|mouth_displaynode|mouth_shape13.visibility;
					CBdeleteConnection Kip_Rig|Rigged_Element|mouth_displaynode|mouth_shape14.visibility;


					CBdeleteConnection Kip_Rig|Rigged_Element|Arm_group|LfArm_AttachGroup|LfArm_Transforms|Joint_LfArmTwist|Joint_LfArmA|Joint_LfArmB|Joint_LfArmC|Joint_LfArmD|Joint_LfArmE|Joint_LfArmF.rotateX;
					CBdeleteConnection Kip_Rig|Rigged_Element|Arm_group|LfArm_AttachGroup|LfArm_Transforms|Joint_LfArmTwist|Joint_LfArmA|Joint_LfArmB|Joint_LfArmC|Joint_LfArmD|Joint_LfArmE|Joint_LfArmF.rotateY;
					CBdeleteConnection Kip_Rig|Rigged_Element|Arm_group|LfArm_AttachGroup|LfArm_Transforms|Joint_LfArmTwist|Joint_LfArmA|Joint_LfArmB|Joint_LfArmC|Joint_LfArmD|Joint_LfArmE|Joint_LfArmF.rotateZ;
					CBdeleteConnection Kip_Rig|Rigged_Element|Arm_group|RtArm_AttachGroup|RtArm_Transforms|Joint_RtArmTwist|Joint_RtArmA|Joint_RtArmB|Joint_RtArmC|Joint_RtArmD|Joint_RtArmE|Joint_RtArmF.rotateX;
					CBdeleteConnection Kip_Rig|Rigged_Element|Arm_group|RtArm_AttachGroup|RtArm_Transforms|Joint_RtArmTwist|Joint_RtArmA|Joint_RtArmB|Joint_RtArmC|Joint_RtArmD|Joint_RtArmE|Joint_RtArmF.rotateY;
					CBdeleteConnection Kip_Rig|Rigged_Element|Arm_group|RtArm_AttachGroup|RtArm_Transforms|Joint_RtArmTwist|Joint_RtArmA|Joint_RtArmB|Joint_RtArmC|Joint_RtArmD|Joint_RtArmE|Joint_RtArmF.rotateZ;

					CBdeleteConnection RT_EYELID_BMP1.frameExtension;
					CBdeleteConnection RT_EYELID_MAT1.frameExtension;
					CBdeleteConnection LT_EYELID_BMP1.frameExtension;
					CBdeleteConnection LT_EYELID_MAT1.frameExtension;

					CBdeleteConnection MOUTH_COL1.frameExtension;
					CBdeleteConnection MOUTH_MAT1.frameExtension;
					CBdeleteConnection MOUTH_BMP1.frameExtension;

					CBdeleteConnection RT_EYE_BMP1.frameExtension;
					CBdeleteConnection RT_EYE_MAT1.frameExtension;
					CBdeleteConnection ($RT_EYE_COL[0]+".frameExtension");

					CBdeleteConnection LT_EYE_COL1.frameExtension;
					CBdeleteConnection LT_EYE_BMP1.frameExtension;
					CBdeleteConnection LT_EYE_MAT1.frameExtension;

					// embed the expression
					string $exp = "if(Kip_Rig|Rigged_Element|Arm_group|LfArm_BodyTwist|Lf_comp_val|LfWrist_ANIM.Body_World==1)"
							+"\n{"
								+"\n Kip_Rig|Rigged_Element|Arm_group|LfArm_AttachGroup|LfArm_Transforms|Joint_LfArmTwist|Joint_LfArmA|Joint_LfArmB|Joint_LfArmC|Joint_LfArmD|Joint_LfArmE|Joint_LfArmF|Joint_LfWrist|Joint_LfWrist_orientConstraint1.LfWrist_ANIMW0=0;"
								+"\n Kip_Rig|Rigged_Element|Arm_group|LfArm_BodyTwist|LfArm_BodyTwist_orientConstraint1.Joint_LfArmFW0=0;"
								+"\n Kip_Rig|Rigged_Element|Arm_group|LfArm_BodyTwist|LfArm_BodyTwist_orientConstraint1.Lf_Default_ConstrainW1=1;"
							+"\n}\n"
							+"else"
							+"\n{"
								+"\n Kip_Rig|Rigged_Element|Arm_group|LfArm_AttachGroup|LfArm_Transforms|Joint_LfArmTwist|Joint_LfArmA|Joint_LfArmB|Joint_LfArmC|Joint_LfArmD|Joint_LfArmE|Joint_LfArmF|Joint_LfWrist|Joint_LfWrist_orientConstraint1.LfWrist_ANIMW0=1;"
								+"\n Kip_Rig|Rigged_Element|Arm_group|LfArm_BodyTwist|LfArm_BodyTwist_orientConstraint1.Joint_LfArmFW0=1;"
								+"\n Kip_Rig|Rigged_Element|Arm_group|LfArm_BodyTwist|LfArm_BodyTwist_orientConstraint1.Lf_Default_ConstrainW1=0;"
							+"\n}"

							//------------

							+"\nif(Kip_Rig|Rigged_Element|Arm_group|RtArm_BodyTwist|Rt_comp_val|RtWrist_ANIM.Body_World==1)"
							+"\n{"
								+"\n Kip_Rig|Rigged_Element|Arm_group|RtArm_AttachGroup|RtArm_Transforms|Joint_RtArmTwist|Joint_RtArmA|Joint_RtArmB|Joint_RtArmC|Joint_RtArmD|Joint_RtArmE|Joint_RtArmF|Joint_RtWrist|Joint_RtWrist_orientConstraint2.RtWrist_ANIMW0=0;"
								+"\n Kip_Rig|Rigged_Element|Arm_group|RtArm_BodyTwist|RtArm_BodyTwist_orientConstraint1.Joint_RtArmFW0=0;"
								+"\n Kip_Rig|Rigged_Element|Arm_group|RtArm_BodyTwist|RtArm_BodyTwist_orientConstraint1.Rt_Default_ConstrainW1=1;"
							+"\n}\n"
							+"else"
							+"\n{"
								+"\n Kip_Rig|Rigged_Element|Arm_group|RtArm_AttachGroup|RtArm_Transforms|Joint_RtArmTwist|Joint_RtArmA|Joint_RtArmB|Joint_RtArmC|Joint_RtArmD|Joint_RtArmE|Joint_RtArmF|Joint_RtWrist|Joint_RtWrist_orientConstraint2.RtWrist_ANIMW0=1;"	 
								+"\n Kip_Rig|Rigged_Element|Arm_group|RtArm_BodyTwist|RtArm_BodyTwist_orientConstraint1.Joint_RtArmFW0=1;"
								+"\n Kip_Rig|Rigged_Element|Arm_group|RtArm_BodyTwist|RtArm_BodyTwist_orientConstraint1.Rt_Default_ConstrainW1=0;"
							+"\n}"

							//------------

							+"\nif(Kip_Rig|World_ANIM|Main_ANIM.SquashStretch < 0)"
							+"\n{"
								+"\n blendShape_BodyLattice.Squash=-(Kip_Rig|World_ANIM|Main_ANIM.SquashStretch/10);"
							+"\n}\n"
							+"else"
							+"\n{"
								+"\n blendShape_BodyLattice.Squash=0;"
							+"\n}"
							+"if(Kip_Rig|World_ANIM|Main_ANIM.SquashStretch > 0)"
							+"\n{"
								+"\n blendShape_BodyLattice.Stretch=(Kip_Rig|World_ANIM|Main_ANIM.SquashStretch/10);"
							+"\n}\n"
							+"else"
							+"\n{"
								+"\n blendShape_BodyLattice.Stretch=0;"
							+"\n}"

							//--------------

							+"if(Kip_Rig|World_ANIM|Main_ANIM|Main_Y|Top_ANIM.LfArmInOut==1)"
							+"\n{"
								+"\n Kip_Rig|Rigged_Element|Arm_group|LfArm_AttachGroup.visibility=1;"
								+"\n Kip_Rig|Rigged_Element|Arm_group|LfArm_Geometry.visibility=1;"
								+"\n Kip_Rig|World_ANIM|LfArmWorld_Transforms.visibility=1;"
								+"\n Kip_Rig|Rigged_Element|Hands|Lf_Hand.visibility=0;"
							+"\n}\n"
							+"else"
							+"\n{"
								+"\n Kip_Rig|Rigged_Element|Arm_group|LfArm_AttachGroup.visibility=0;"
								+"\n Kip_Rig|Rigged_Element|Arm_group|LfArm_Geometry.visibility=0;"
								+"\n Kip_Rig|World_ANIM|LfArmWorld_Transforms.visibility=0;"
								+"\n Kip_Rig|Rigged_Element|Hands|Lf_Hand.visibility=1;"
							+"\n}"

							//--------------

							+"if(Kip_Rig|World_ANIM|Main_ANIM|Main_Y|Top_ANIM.RtArmInOut==1)"
							+"\n{"
								+"\n Kip_Rig|Rigged_Element|Arm_group|RtArm_AttachGroup.visibility=1;"
								+"\n Kip_Rig|Rigged_Element|Arm_group|RtArm_Geometry.visibility=1;"
								+"\n Kip_Rig|World_ANIM|RtArmWorld_Transforms.visibility=1;"
								+"\n Kip_Rig|Rigged_Element|Hands|Rt_Hand.visibility=0;"
							+"\n}\n"
							+"else"
							+"\n{"
								+"\n Kip_Rig|Rigged_Element|Arm_group|RtArm_AttachGroup.visibility=0;"
								+"\n Kip_Rig|Rigged_Element|Arm_group|RtArm_Geometry.visibility=0;"
								+"\n Kip_Rig|World_ANIM|RtArmWorld_Transforms.visibility=0;"
								+"\n Kip_Rig|Rigged_Element|Hands|Rt_Hand.visibility=1;"
							+"\n}"

							//--------------1~14

							+"if(Kip_Rig|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM.MouthShape==1)"
							+"\n{"
								+"\n Kip_Rig|Rigged_Element|mouth_displaynode|mouth_shape1.visibility= 1;"

							+"\n}\n"
							+"else"
							+"\n{"
								+"\n Kip_Rig|Rigged_Element|mouth_displaynode|mouth_shape1.visibility= 0;"
							+"\n}"
						+"if(Kip_Rig|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM.MouthShape==2)"
							+"\n{"
								+"\n Kip_Rig|Rigged_Element|mouth_displaynode|mouth_shape2.visibility= 1;"

							+"\n}\n"
							+"else"
							+"\n{"
								+"\n Kip_Rig|Rigged_Element|mouth_displaynode|mouth_shape2.visibility= 0;"
							+"\n}"
						+"if(Kip_Rig|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM.MouthShape==3)"
							+"\n{"
								+"\n Kip_Rig|Rigged_Element|mouth_displaynode|mouth_shape3.visibility= 1;"

							+"\n}\n"
							+"else"
							+"\n{"
								+"\n Kip_Rig|Rigged_Element|mouth_displaynode|mouth_shape3.visibility= 0;"
							+"\n}"
						+"if(Kip_Rig|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM.MouthShape==4)"
							+"\n{"
								+"\n Kip_Rig|Rigged_Element|mouth_displaynode|mouth_shape4.visibility= 1;"

							+"\n}\n"
							+"else"
							+"\n{"
								+"\n Kip_Rig|Rigged_Element|mouth_displaynode|mouth_shape4.visibility= 0;"
							+"\n}"
						+"if(Kip_Rig|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM.MouthShape==5)"
							+"\n{"
								+"\n Kip_Rig|Rigged_Element|mouth_displaynode|mouth_shape5.visibility= 1;"

							+"\n}\n"
							+"else"
							+"\n{"
								+"\n Kip_Rig|Rigged_Element|mouth_displaynode|mouth_shape5.visibility= 0;"
							+"\n}"
						+"if(Kip_Rig|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM.MouthShape==6)"
							+"\n{"
								+"\n Kip_Rig|Rigged_Element|mouth_displaynode|mouth_shape6.visibility= 1;"

							+"\n}\n"
							+"else"
							+"\n{"
								+"\n Kip_Rig|Rigged_Element|mouth_displaynode|mouth_shape6.visibility= 0;"
							+"\n}"
						+"if(Kip_Rig|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM.MouthShape==7)"
							+"\n{"
								+"\n Kip_Rig|Rigged_Element|mouth_displaynode|mouth_shape7.visibility= 1;"

							+"\n}\n"
							+"else"
							+"\n{"
								+"\n Kip_Rig|Rigged_Element|mouth_displaynode|mouth_shape7.visibility= 0;"
							+"\n}"
						+"if(Kip_Rig|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM.MouthShape==8)"
							+"\n{"
								+"\n Kip_Rig|Rigged_Element|mouth_displaynode|mouth_shape8.visibility= 1;"

							+"\n}\n"
							+"else"
							+"\n{"
								+"\n Kip_Rig|Rigged_Element|mouth_displaynode|mouth_shape8.visibility= 0;"
							+"\n}"

						+"if(Kip_Rig|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM.MouthShape==9)"
							+"\n{"
								+"\n Kip_Rig|Rigged_Element|mouth_displaynode|mouth_shape9.visibility= 1;"

							+"\n}\n"
							+"else"
							+"\n{"
								+"\n Kip_Rig|Rigged_Element|mouth_displaynode|mouth_shape9.visibility= 0;"
							+"\n}"
						+"if(Kip_Rig|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM.MouthShape==10)"
							+"\n{"
								+"\n Kip_Rig|Rigged_Element|mouth_displaynode|mouth_shape10.visibility= 1;"

							+"\n}\n"
							+"else"
							+"\n{"
								+"\n Kip_Rig|Rigged_Element|mouth_displaynode|mouth_shape10.visibility= 0;"
							+"\n}"
						+"if(Kip_Rig|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM.MouthShape==11)"
							+"\n{"
								+"\n Kip_Rig|Rigged_Element|mouth_displaynode|mouth_shape11.visibility= 1;"

							+"\n}\n"
							+"else"
							+"\n{"
								+"\n Kip_Rig|Rigged_Element|mouth_displaynode|mouth_shape11.visibility= 0;"
							+"\n}"
						+"if(Kip_Rig|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM.MouthShape==12)"
							+"\n{"
								+"\n Kip_Rig|Rigged_Element|mouth_displaynode|mouth_shape12.visibility= 1;"

							+"\n}\n"
							+"else"
							+"\n{"
								+"\n Kip_Rig|Rigged_Element|mouth_displaynode|mouth_shape12.visibility= 0;"
							+"\n}"
						+"if(Kip_Rig|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM.MouthShape==13)"
							+"\n{"
								+"\n Kip_Rig|Rigged_Element|mouth_displaynode|mouth_shape13.visibility= 1;"

							+"\n}\n"
							+"else"
							+"\n{"
								+"\n Kip_Rig|Rigged_Element|mouth_displaynode|mouth_shape13.visibility= 0;"
							+"\n}"
						+"if(Kip_Rig|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM.MouthShape==14)"
							+"\n{"
								+"\n Kip_Rig|Rigged_Element|mouth_displaynode|mouth_shape14.visibility= 1;"

							+"\n}\n"
							+"else"
							+"\n{"
								+"\n Kip_Rig|Rigged_Element|mouth_displaynode|mouth_shape14.visibility= 0;"
							+"\n}"

							//-----------

							+"\n Kip_Rig|Rigged_Element|Arm_group|LfArm_AttachGroup|LfArm_Transforms|Joint_LfArmTwist|Joint_LfArmA|Joint_LfArmB|Joint_LfArmC|Joint_LfArmD|Joint_LfArmE|Joint_LfArmF.rotateX=0;"
							+"\n Kip_Rig|Rigged_Element|Arm_group|LfArm_AttachGroup|LfArm_Transforms|Joint_LfArmTwist|Joint_LfArmA|Joint_LfArmB|Joint_LfArmC|Joint_LfArmD|Joint_LfArmE|Joint_LfArmF.rotateY=0;"
							+"\n Kip_Rig|Rigged_Element|Arm_group|LfArm_AttachGroup|LfArm_Transforms|Joint_LfArmTwist|Joint_LfArmA|Joint_LfArmB|Joint_LfArmC|Joint_LfArmD|Joint_LfArmE|Joint_LfArmF.rotateZ=0;"
							+"\n Kip_Rig|Rigged_Element|Arm_group|RtArm_AttachGroup|RtArm_Transforms|Joint_RtArmTwist|Joint_RtArmA|Joint_RtArmB|Joint_RtArmC|Joint_RtArmD|Joint_RtArmE|Joint_RtArmF.rotateX=0;"
							+"\n Kip_Rig|Rigged_Element|Arm_group|RtArm_AttachGroup|RtArm_Transforms|Joint_RtArmTwist|Joint_RtArmA|Joint_RtArmB|Joint_RtArmC|Joint_RtArmD|Joint_RtArmE|Joint_RtArmF.rotateY=0;"
							+"\n Kip_Rig|Rigged_Element|Arm_group|RtArm_AttachGroup|RtArm_Transforms|Joint_RtArmTwist|Joint_RtArmA|Joint_RtArmB|Joint_RtArmC|Joint_RtArmD|Joint_RtArmE|Joint_RtArmF.rotateZ=0;"


							+"\n "+$RT_EYE_COL[0]+".frameExtension=Kip_Rig|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM.RtEyeShape;"
							+"\n RT_EYE_MAT1.frameExtension=Kip_Rig|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM.RtEyeShape;"
							+"\n RT_EYE_BMP1.frameExtension=Kip_Rig|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM.RtEyeShape;"
							+"\n LT_EYE_COL1.frameExtension=Kip_Rig|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM.LfEyeShape;"
							+"\n LT_EYE_MAT1.frameExtension=Kip_Rig|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM.LfEyeShape;"
							+"\n LT_EYE_BMP1.frameExtension=Kip_Rig|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM.LfEyeShape;"
							+"\n MOUTH_COL1.frameExtension=Kip_Rig|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM.NewMouth;"
							+"\n MOUTH_MAT1.frameExtension=Kip_Rig|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM.NewMouth;"
							+"\n MOUTH_BMP1.frameExtension=Kip_Rig|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM.NewMouth;"
							+"\n LT_EYELID_MAT1.frameExtension=Kip_Rig|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM.RtEyeShape;"
							+"\n LT_EYELID_BMP1.frameExtension=Kip_Rig|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM.RtEyeShape;"
							+"\n RT_EYELID_MAT1.frameExtension=Kip_Rig|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM.RtEyeShape;"
							+"\n RT_EYELID_BMP1.frameExtension=Kip_Rig|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM.RtEyeShape;";

							expression -s $exp -o "" -name "eye_eyelid_mouth_kipegg225b" -ae 1 -uc all;
				}
			}


			if (`gmatch $sl[0] "*Twinkle_Rig*"`)
			{
				
				if (!`objExists ($sl[0] + "|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM")`)
				{
					error ("层级结构改变了,需要 " + $sl[0] + "|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM");		
				}

				// get the mouth control attribute out and unlock it
				source generateChannelMenu.mel;
				select -r Twinkle_Rig|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM ;
				ChannelControlEditor;
				lockingKeyableWnd;
				textScrollList -e -da NONKEYABLE_List;
				textScrollList -e -si "MouthType" NONKEYABLE_List;
				PS_moveToKeyable Keyable Twinkle_Rig|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM;
				deleteUI LockingKeyable;				
				CBunlockAttr "Twinkle_Rig|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM.MouthType";

				string $pl_mouthP3d[] = `ls -type place3dTexture "|Twinkle_Rig|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM|Joint_Head|Mouth_Projections|*"`;
		
				if (!`objExists $pl_mouthP3d[0]`)
				{
					error ("层级结构改变了,需将口部place3dTexture节点置于|Twinkle_Rig|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM|Joint_Head|Mouth_Projections|");		
				}
				// get the mouth file nodes
				string $mouth_pro[] = `listConnections -s 0 -d 1 -type  projection $pl_mouthP3d[0]`;
				string $mouth_material[],$MOUTH_BMP[],$MOUTH_MAT[],$MOUTH_COL[];
				for($item in $mouth_pro)
				{
					if (!size($mouth_material))
					{
						$mouth_material = `listConnections -s 0 -d 1 -type lambert $item`;
					}

					if (size(`listConnections -s 0 -d 1 -type bump3d $item`))
					{
						$MOUTH_BMP = `listConnections -s 1 -d 0 -type file $item`;
						$mouth_material = `listConnections -s 0 -d 1 -type lambert $item`;
					}
					else
					{
						if (`isConnected ($item+".outColor") ($mouth_material[0]+".transparency")`)
						{
							$MOUTH_MAT = `listConnections -s 1 -d 0 -type file $item`;
						}

						if (`isConnected ($item+".outColor") ($mouth_material[0]+".color")`)
						{
							$MOUTH_COL = `listConnections -s 1 -d 0 -type file $item`;
						}
						
					}
				}

				if (size($MOUTH_BMP)&&size($MOUTH_MAT)&&size($MOUTH_COL))
				{		
					CBdeleteConnection ($MOUTH_BMP[0]+".frameExtension");
					CBdeleteConnection ($MOUTH_MAT[0]+".frameExtension");
					CBdeleteConnection ($MOUTH_COL[0]+".frameExtension");

					// embed the expression
					string $exp = $MOUTH_BMP[0]+".frameExtension=|Twinkle_Rig|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM.NewMouth;\n"
							+ $MOUTH_MAT[0]+".frameExtension=|Twinkle_Rig|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM.NewMouth;\n"
							+ $MOUTH_COL[0]+".frameExtension=|Twinkle_Rig|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM.NewMouth;";

							expression -s $exp -o "" -name "fxiMouth_twinklebacon225b" -ae 1 -uc all;
				}

			}


		if (`gmatch $sl[0] "*wayne_Rig*"`)
		{
			if (!`objExists ($sl[0] + "|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM")`)
			{
				error ("层级结构改变了,需要 " + $sl[0] + "|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM");		
			}

			source generateChannelMenu.mel;
			select -r wayne_Rig|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM ;
			ChannelControlEditor;
			lockingKeyableWnd;
			textScrollList -e -da NONKEYABLE_List;
			textScrollList -e -si "MouthType" NONKEYABLE_List;
			PS_moveToKeyable Keyable wayne_Rig|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM;
			deleteUI LockingKeyable;				
			CBunlockAttr "wayne_Rig|World_ANIM|Main_ANIM|Main_Y|Top_ANIM|Head_ANIM.MouthType";
		}


//		connectAttr -na ($lam + ".outColor") Doozer_uv_7_layeredShader1.inputs[26].color;
//		connectAttr -na ($lam + ".outGlowColor") Doozer_uv_7_layeredShader1.inputs[26].glowColor;
//		connectAttr -na ($lam + ".outTransparency") Doozer_uv_7_layeredShader1.inputs[26].transparency;
	}
}
