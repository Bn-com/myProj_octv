/// Copyright (C) 2000-2009 IDMT. All rights reserved.////// Author: 黄璧（重庆）////// Creation Date: 2009/03/20////// Description: global proc HbAutoGrass(){		if (`window -ex HbTurbulenceWin`)		deleteUI HbTurbulenceWin;             window -widthHeight 300 450 -t"自动海草" HbTurbulenceWin;				  string $form = `formLayout`;				string $child1 = `formLayout`;				textFieldGrp -en 1 -columnWidth 2 265 -label "" CreatLayerList1;				string $bb="a";				button -l "创建"		-w 80 -c "HbAutoTurbulence" TheBouuon;	       setParent ..;			formLayout -edit				-attachForm		CreatLayerList1		"top"		20				-attachForm	CreatLayerList1			"left"		-140								-attachForm	TheBouuon		"top"		20				-attachControl	TheBouuon			"left"		1  CreatLayerList1						$child1;		showWindow HbTurbulenceWin;}global proc HbAutoTurbulence(){	string $ThePath="Z:/Resource/Support/Maya/projects/DODII/Import/kelp/kelp.ma";	string $GetOlderName=`textFieldGrp -q -text CreatLayerList1`;	string $GetTheOldTreeName[]=`ls -tr $GetOlderName`;	string $GetAllName[]=`ls "HbAuto*:HbKelp_ctrl"`;	int $i=0;		if (`size($GetAllName)`==0)		{			$i=1;		}		else		{			string $buffer[];			$numTokens = `tokenize $GetAllName[size($GetAllName)-1] ":" $buffer`;			string $result = substituteAllString($buffer[0], "HbAuto", "");			$i=(int($result)+1);		}	for ($Obj in $GetTheOldTreeName)	{		string $name=`file -import -type "mayaAscii" -ra true -namespace ("HbAuto"+$i) -options "v=0"  -pr -loadReferenceDepth "all" $ThePath`;		$Pos=`xform -q -ws -piv $Obj`;		$rotate=`xform -q -ws -ro $Obj`;		$scale=`xform -q -s $Obj`;		xform -ws -t $Pos[0] $Pos[1] $Pos[2] ("HbAuto"+$i+":HbKelp_ctrl");		xform -ws -ro $rotate[0] $rotate[1] $rotate[2] ("HbAuto"+$i+":HbKelp_ctrl");		xform  -s $scale[0] $scale[1] $scale[2] ("HbAuto"+$i+":HbKelp_ctrl");		select -r $Obj;		string $LatticleNmae[]=`lattice  -name ("HbLat"+$i) -divisions 2 50 2 -objectCentered true  -ldv 2 2 2`;		string $WireName[]=`wire -name ("HbWire"+$i)  -gw false -en 1.000000 -ce 0.000000 -li 0.000000 -w ("HbAuto"+$i+":wire_CV") ($LatticleNmae[0]+"Lattice")`;		setAttr ($WireName[0]+".dropoffDistance[0]") 100;		setAttr ($LatticleNmae[0]+"Lattice.visibility") 0;		connectAttr -f ("HbAuto"+$i+":HbKelp_ctrl.switch") ($WireName[0]+".envelope");		//setAttr "HbAuto"+$i+":coralparkplanta_float_grass_A1.turbulence" (0.20662+rand(-0.15,0.15));		//setAttr "HbAuto"+$i+":coralparkplanta_float_grass_A1.turbulenceFrequency" (0.29752+rand(-0.15,0.15));		//setAttr "HbAuto"+$i+":coralparkplanta_float_grass_A1.turbulenceSpeed" (0.18182+rand(-0.15,0.15));		$i++;	}}