global proc lreat() 
 {
    if (`window -exists eat`)
		deleteUI eat;
	window -title "点餐" -resizeToFitChildren true 
	       -widthHeight 500 100
	       -s 1
	       eat;
	       columnLayout 
		             -w 600
			     -h 300;

                         frameLayout   -label "盖饭类"
	                               -bs "etchedIn"
			               -w 500
			               -h 260
			               -la "center";
                      rowColumnLayout -numberOfColumns 4
		       -columnWidth 1 130
                       -columnWidth 2 130
                       -columnWidth 3 130
		       -columnWidth 4 130;

		       checkBoxGrp -l1 "回锅肉  7元"
		                   -v1 0 eat1;		       
		       checkBoxGrp -l1 "青椒干丝肉丝  7元"
		                   -v1 0 eat2;
		       checkBoxGrp -l1 "土豆肉丝  7元"
		                   -v1 0 eat3;				   
		       checkBoxGrp -l1 "红烧肉  7元"
		                   -v1 0 eat4;
		       checkBoxGrp -l1 "青椒肉丝  7元"
		                   -v1 0 eat5;
		       checkBoxGrp -l1 "黄瓜肉片 7元"
		                   -v1 0 eat6;
	               checkBoxGrp -l1 "番茄鸡蛋  6元"
		                   -v1 0 eat7;
		       checkBoxGrp -l1 "红烧牛肉  7元"
		                   -v1 0 eat8;
		       checkBoxGrp -l1 "泡椒鱼片  7元"
		                   -v1 0 eat9;
		       checkBoxGrp -l1 "鱼香肉丝  7元"
		                   -v1 0 eat10;
		       checkBoxGrp -l1 "脆皮豆腐  7元"
		                   -v1 0 eat11;
		       checkBoxGrp -l1 "盐煎肉  7元"
		                   -v1 0 eat12;
		       checkBoxGrp -l1 "泡椒猪肝  7元"
		                   -v1 0 eat13;
		       checkBoxGrp -l1 "宫保鸡丁  7元"
		                   -v1 0 eat14;		       
		       checkBoxGrp -l1 "肉丝跑蛋  7元"
		                   -v1 0 eat15;
		       checkBoxGrp -l1 "泡椒鱼片  7元"
		                   -v1 0 eat16;				   
		       checkBoxGrp -l1 "泡椒鸡杂  7元"
		                   -v1 0 eat17;
		       checkBoxGrp -l1 "宫保肉丁  7元"
		                   -v1 0 eat18;
		       checkBoxGrp -l1 "泡椒牛肉  7元"
		                   -v1 0 eat19;
	               checkBoxGrp -l1 "肉末茄子  6元"
		                   -v1 0 eat20;
		       checkBoxGrp -l1 "肉米粉丝  6元"
		                   -v1 0 eat21;
		       checkBoxGrp -l1 "家常豆腐  6元"
		                   -v1 0 eat22;
		       checkBoxGrp -l1 "地三鲜  6元"
		                   -v1 0 eat23;
		       checkBoxGrp -l1 "鱼香茄子  6元"
		                   -v1 0 eat24;
		       checkBoxGrp -l1 "青椒皮蛋  6元"
		                   -v1 0 eat25;
		       checkBoxGrp -l1 "香菇肉片  7元"
		                   -v1 0 eat26;
		       checkBoxGrp -l1 "刀豆烧土豆  6元"
		                   -v1 0 eat27;	
		       checkBoxGrp -l1 "平菇肉片  7元"
		                   -v1 0 eat28;					   
		       checkBoxGrp -l1 "泡菜肉丝  7元"
		                   -v1 0 eat29;
		       checkBoxGrp -l1 "虾皮冬瓜  6元"
		                   -v1 0 eat30;				   
		       checkBoxGrp -l1 "丝瓜肉片  7元"
		                   -v1 0 eat31;
		       checkBoxGrp -l1 "虎皮青椒  6元"
		                   -v1 0 eat32;
		       checkBoxGrp -l1 "松仁玉米 7元"
		                   -v1 0 eat33;
	               checkBoxGrp -l1 "青椒腊肉  7元"
		                   -v1 0 eat34;
		       checkBoxGrp -l1 "番茄肉片  7元"
		                   -v1 0 eat35;
		       checkBoxGrp -l1 "红烧鸡块  7元"
		                   -v1 0 eat36;
		       checkBoxGrp -l1 "榨菜肉丝  7元"
		                   -v1 0 eat37;
		       checkBoxGrp -l1 "麻辣豆腐  6元"
		                   -v1 0 eat38;
		       checkBoxGrp -l1 "蒜苔肉丝  7元"
		                   -v1 0 eat39;
		       checkBoxGrp -l1 "蒜苔炒蛋  7元"
		                   -v1 0 eat40;
		       checkBoxGrp -l1 "木耳肉片  7元"
		                   -v1 0 eat41;		       
		       checkBoxGrp -l1 "木耳炒蛋  6元"
		                   -v1 0 eat42;
		       checkBoxGrp -l1 "苦瓜炒肉  7元"
		                   -v1 0 eat43;				   
		       checkBoxGrp -l1 "泡椒肉丝  7元"
		                   -v1 0 eat44;
		       checkBoxGrp -l1 "青椒肉末  7元"
		                   -v1 0 eat45;
		       checkBoxGrp -l1 "青椒炒蛋  6元"
		                   -v1 0 eat46;
	               checkBoxGrp -l1 "酸豇豆肉末  7元"
		                   -v1 0 eat47;
		       checkBoxGrp -l1 "麻辣血旺  6元"
		                   -v1 0 eat48;
		       checkBoxGrp -l1 "花菜肉片  7元"
		                   -v1 0 eat49;
		       checkBoxGrp -l1 "土豆牛肉  7元"
		                   -v1 0 eat50;
		       checkBoxGrp -l1 "酸辣藕片  6元"
		                   -v1 0 eat51;
		       checkBoxGrp -l1 "莴笋肉丁  7元"
		                   -v1 0 eat52;
		       checkBoxGrp -l1 "糖醋白菜  5元"
		                   -v1 0 eat53;
		       checkBoxGrp -l1 "青椒土豆丝  5元"
		                   -v1 0 eat54;
		       checkBoxGrp -l1 "炝炒白菜  5元"
		                   -v1 0 eat55;
		       checkBoxGrp -l1 "青椒跑蛋  7元"
		                   -v1 0 eat56;
		       checkBoxGrp -l1 "大葱炒蛋  7元"
		                   -v1 0 eat57;
		     setParent..;
		     setParent..;
		    
                      frameLayout   -label "炒饭类"
	                               -bs "etchedIn"
			               -w 500
			               -h 80
			               -la "center";
                      rowColumnLayout -numberOfColumns 4
		       -columnWidth 1 130
                       -columnWidth 2 130
                       -columnWidth 3 130
		       -columnWidth 3 130;
		       checkBoxGrp -l1 "蛋炒饭 4元"
		                   -v1 0 eat58;				   
		       checkBoxGrp -l1 "扬州炒饭 6元"
		                   -v1 0 eat59;
		       checkBoxGrp -l1 "榨菜肉丝炒饭 6元"
		                   -v1 0 eat60;
		       checkBoxGrp -l1 "番茄鸡蛋炒饭 6元"
		                   -v1 0 eat61;
	               checkBoxGrp -l1 "回锅肉炒饭 6元"
		                   -v1 0 eat62;
		       checkBoxGrp -l1 "青椒肉丝炒饭 6元"
		                   -v1 0 eat63;
		       checkBoxGrp -l1 "盐煎肉炒饭 6元"
		                   -v1 0 eat64;
		       checkBoxGrp -l1 "泡椒肉丝炒饭 6元"
		                   -v1 0 eat65;
		       checkBoxGrp -l1 "土豆肉丝炒饭 6元"
		                   -v1 0 eat66;
		       checkBoxGrp -l1 "酸豇豆肉末炒饭 6元"
		                   -v1 0 eat67;
		       checkBoxGrp -l1 "水饺  3元/两"
		                   -v1 0 eat68;
		       checkBoxGrp -l1 "炒米线  5元"
		                   -v1 0 eat69;

		     setParent..;
                     setParent..;
		     text -label "点餐者:";
		     string $name = `textField name`;
		     text -label "备注:";
		     string $PS = `textField ps`;
		     checkBoxGrp -l1 "加煎蛋+1元"
		                 -v1 0 egg;
		     button -label "点餐" -c findeat; 
		     text -label "点餐成功后将会在 \"Z:\\scratch\\点餐\\当前日期\\\"中生成点餐文件";
 


                
	showWindow eat;

 }

 global proc findeat() 
 {  string $egg;
    string $usename;
    string $ps;
    $egg= `checkBoxGrp -q -v1 egg`;
    $usename = `textField -q -tx name`;
    $ps = `textField -q -tx ps`;

    for($i=1;$i<70;$i++)
    {
    $eatNUB=eval("checkBoxGrp -q -v1 eat"+$i);
     if($eatNUB == "1" )
       {
        $eatname=eval("checkBoxGrp -q -l1 eat"+$i);
	string $alltext1;
          $alltext1 = $eatname+"-"+$usename+"-"+$ps;
	 if($egg=="1")
	 { string $alltext2;
	   $alltext2=$alltext1+"-加煎蛋+1元";
	  write($alltext2);
	  }
	  else
	    {write($alltext1);
	    }
       }
    }


 }
 global proc write(string $alltext) 
 {
 
    $readdd=`system("date")`;
    string $buf[];
    string $buf2[];
    tokenize $readdd " " $buf;
    tokenize $alltext "-" $buf2;
    string $result = substituteAllString($buf[4], "/", "-");
    string $buf3[];
    tokenize $result  "-" $buf3;
    $nn= `size $buf3[0]`;
    string     $date;
    if ($nn=="4")
    {
      $date =$result;
    }
     else
       { 
          $date = $buf3[2]+"-"+$buf3[0]+"-"+$buf3[1];
       }

    $nu=`size $buf2[1]`;
     //print $nu;
     if ($nu=="0")
     {error "请填写点餐人";

      }
      else
      {
   
   $exampleFilePath="z:\\scratch\\点餐\\"+$date+"\\";
   $exampleFileName ="z:\\scratch\\点餐\\"+$date+"\\"+$alltext+".txt";
   sysFile -md $exampleFilePath;
  $shuchu2="成功点餐";
  $shuchu=$shuchu2+$exampleFileName;
  print $shuchu;
  $fileId=`fopen $exampleFileName "w"`;
  	fclose $fileId;
      }

 }

