//////////////////////////////////////////////////////////
//
//	Script Name:ot_modSwitche 
//	Author: HanHong
//	Created: 
//
//	Update/Change: HanHong
//	Last Updated: 
//	Description:
//				
//////////////////////////////////////////////////////////
//导出文件


global proc ot_expmod()
{
    string $mods[] =`ls "*_all"`;
    select -r $mods;
    parent -w;
    for ($mod in $mods)
    {
	string $fd = "//file-cluster/GDC/Projects/OTTO/OTTO_Scratch/TD/mod/"+$mod;
	select $mod;
	file -force -options "v=0" -typ "mayaAscii" -pr -es $fd;
     }
}
//选择所有
global proc ot_Modselect(string $ModSelect)
{
	switch($ModSelect)
	{
		case "Hi":
			string $Hi[]=`select -r "*_c_hi_all"`;
				
		case "Md":
			string $Md[]=`select -r "*_c_md_all"`;
		case "Plane":
			string $Plane[]=`select -r "*_c_plane_all"`;
		case "Prox":
			string $Prox[]=`select -r "*_c_prox_all"`;
		case "Low":
			string $Low[]=`select -r "*_c_lo_all"`;
	}
}
//导入所有参考
global proc ot_imReference()
{
	string $refPath[]=`file -q -r`;
	if(size($refPath)!=0)
	{
		for ($r in $refPath)
		{
			string $refRN = `file -q -rfn $r`;
			if (`file -q -dr $r`)	file -loadReference $refRN;
			file -ir $r;
		}
	}
	
}

//高低模替换
//"source \"//file-cluster/GDC/Resource/Support/Maya/projects/OTTO/ot_modSwitche.mel\";ot_Modselect(\"Hi\");"
global proc ot_switchPlane()
//替换为面片
{
	string $treeRef ="//file-cluster/GDC/Projects/OTTO/Project/scenes/sets/s000003tree/master/ot_s000003tree_final_h_ms_tex.mb";
	string $GenRef ="//file-cluster/GDC/Projects/OTTO/Project/scenes/sets/000001house/master/ot_000001house_final_h_ms_tex.mb";
	string $objselect[]=`ls -sl -l`;
	for($obj in $objselect)
	{	
		string $buff[];
		$numTokens = `tokenize $obj "|" $buff`;
		string $GRP=$buff[0];
		string $oldgeo = `match ".*_geo[0-9]*" $obj`;
		string $oldGroupall = `match ".*_all[0-9]*" $obj`;
		string $refs[]=`ls -rn $obj`;
		float $geoinfos[]=`xform -q -ws -m  $oldgeo`;
		float $objinfos[]=`xform -q -ws -m  $obj`;
		string $oldallrefs[]=`ls -rn`;
		string $noworkspace=`match "[^:]+$"$oldgeo`;
		string $TreeE = `match "[^|]+$"$noworkspace`;
		$TreeE = `match "[^_]+" $TreeE`;
		if (`match "Tree" $obj` != "")
		{
			if (size($refs)==0)
			{
				string $refFile=`file -import -type "mayaBinary" -ra true -rdn -namespace "ot_s000003tree_final_h_ms_tex" -options "v=0"  -pr -loadReferenceDepth "all"  $treeRef`;
				string $newallrefs[]=`ls -rn`;
				string $newrefs[]= stringArrayRemove($oldallrefs, $newallrefs);
				string $workspace=`match "[^:]+" $newrefs[0]`;
				string $proxyRN=$workspace+":"+"TreeA_c_lo_all"+$TreeE+"_c_planeRN";
				string $proxyswitch=`proxySwitch $proxyRN`;
				string $namespace =$workspace+":"+"TreeA_c_lo_all:";
				string $newgeo = $namespace+ $TreeE + "_c_geo";
				string $buf[] = `listRelatives -fullPath -parent $newgeo`;
				string $pgroup=$buf[0];
				string $Group = $GRP + "|ot_s000003tree_plane_ref";
				if (!`objExists $Group`)
				{
					group -em -parent $GRP -name "ot_s000003tree_plane_ref";
				}
				parent $pgroup $Group;
				delete $newgeo;
				select $newgeo ;
				xform  -ws -m $geoinfos[0] $geoinfos[1]  $geoinfos[2]  $geoinfos[3] $geoinfos[4]  $geoinfos[5]  $geoinfos[6] $geoinfos[7]  $geoinfos[8]  $geoinfos[9] $geoinfos[10]  $geoinfos[11] $geoinfos[12] $geoinfos[13]  $geoinfos[14] $geoinfos[15];
				delete  $oldgeo;
			
			}
			else
			{
				string $workspace=`match "[^:]+" $refs[0]`;
				string $proxyRN=$workspace+":"+"TreeA_c_lo_all"+$TreeE+"_c_planeRN";
				string $proxyswitch=`proxySwitch $proxyRN`;
				string $namespace =$workspace+":"+"TreeA_c_lo_all:";
				string $newgeo = $namespace+ $TreeE + "_c_geo";
				string $buf[] = `listRelatives -fullPath -parent $newgeo`;
				string $pgroup=$buf[0];
				string $Group = $GRP + "|ot_s000003tree_plane_ref";
				if (!`objExists $Group`)
				{
					group -em -parent $GRP -name "ot_s000003tree_plane_ref";
				}
				parent $pgroup $Group;
				select $newgeo ;
				xform  -ws -m $geoinfos[0] $geoinfos[1]  $geoinfos[2]  $geoinfos[3] $geoinfos[4]  $geoinfos[5]  $geoinfos[6] $geoinfos[7]  $geoinfos[8]  $geoinfos[9] $geoinfos[10]  $geoinfos[11] $geoinfos[12] $geoinfos[13]  $geoinfos[14] $geoinfos[15];
				delete  $oldgeo;
			}
		}
		else
		{
			$result1 = `confirmDialog -title "noswitch" -message "该物体没有palne"
						-button "取消" -defaultButton "取消" -cancelButton "取消" -dismissString "取消"`;
			
		}

			
	}
}

////替换为高模
global proc ot_switchHI()
{
	string $treeRef ="//file-cluster/GDC/Projects/OTTO/Project/scenes/sets/s000003tree/master/ot_s000003tree_final_h_ms_tex.mb";
	string $GenRef ="//file-cluster/GDC/Projects/OTTO/Project/scenes/sets/000001house/master/ot_000001house_final_h_ms_tex.mb";
	string $CookRef ="//file-cluster/GDC/Projects/OTTO/Project/scenes/sets/s000013cookiefacktoryext/master/ot_s000013cookiefacktoryext_fish_h_ms_tex.mb";
	string $olsenRef ="//file-cluster/GDC/Projects/OTTO/Project/scenes/sets/s000017olsenhomeext/master/ot_s000017olsenhomeext_finish_h_ms_tex.mb";
	string $ivaRef="//file-cluster/GDC/Projects/OTTO/Project/scenes/sets/s002001ivanhomeext003/texture/ot_s002001ivanhomeext003_final_h_tx.mb";
	string $bushRef ="//file-cluster/GDC/Projects/OTTO/Project/scenes/sets/s000004Bush/master/ot_s000004Bush_final_h_ms_tex.mb";
	string $townRef="//file-cluster/GDC/Projects/OTTO/Project/scenes/sets/s000014townsquare/master/ot_s000014townsquare_finsh_h_ms_tex.mb";
	string $ottohouseRef="//file-cluster/GDC/Projects/OTTO/Project/scenes/sets/s000016ottohouseext/master/ot_s000016ottohouseext_final_h_ms_tex.mb";
	string $townshopeRef="//file-cluster/GDC/Projects/OTTO/Project/scenes/sets/s000009townsquarebookshopext/texture/ot_s000009townsquarebookshopext_final_h_tx.mb";
	string $schoolRef="//file-cluster/GDC/Projects/OTTO/Project/scenes/sets/s000007schoolext/texture/ot_s000007schoolext_final_h_tx.mb";
	string $parkRef="//file-cluster/GDC/Projects/OTTO/Project/scenes/sets/s000015park/texture/ot_s000015park_final_h_tx.mb";
	string $blacRef="//file-cluster/GDC/Projects/OTTO/Project/scenes/sets/s000018blacksmithhome/texture/ot_s000018blacksmithhome_final_h_tx.mb";
	string $treetBRef="//file-cluster/GDC/Projects/OTTO/Project/scenes/sets/s018002StreetBfirestation/texture/ot_s018002StreetBfirestation_final_h_tx.mb";
	string $Topperhome="//file-cluster/GDC/Projects/OTTO/Project/scenes/sets/s008002Topperhomelocationmaterial/texture/ot_s008002Topperhomelocationmaterial_final_h_tx.mb";
	string $HarbRef="//file-cluster/GDC/Projects/OTTO/Project/scenes/sets/s012002Harbourmaterial/texture/ot_s012002Harbourmaterial_final_h_tx.mb";
	string $objselect[]=`ls -sl -l`;
	for($obj in $objselect)
	{	
		string $buff[];
		$numTokens = `tokenize $obj "|" $buff`;
		string $GRP=$buff[0];
		string $oldgeo = `match ".*_geo[0-9]*" $obj`;
		string $oldGroupall = `match ".*_all[0-9]*" $obj`;
		string $refs[]=`ls -rn $obj`;
		float $geoinfos[]=`xform -q -ws -m  $oldgeo`;
		float $objinfos[]=`xform -q -ws -m  $obj`;
		string $oldallrefs[]=`ls -rn`;
		string $noworkspace=`match "[^:]+$"$oldgeo`;
		string $TreeE = `match "[^|]+$"$noworkspace`;
		$TreeE = `match "[^_]+" $TreeE`;
		if (`match "Tree" $obj` != "")
		{
			if (size($refs)==0)
			{
				string $refFile=`file -import -type "mayaBinary" -ra true -rdn -namespace "ot_s000003tree_final_h_ms_tex" -options "v=0"  -pr -loadReferenceDepth "all"  $treeRef`;
				string $newallrefs[]=`ls -rn`;
				string $newrefs[]= stringArrayRemove($oldallrefs, $newallrefs);
				string $workspace=`match "[^:]+" $newrefs[0]`;
				string $proxyRN=$workspace+":"+"TreeA_c_lo_all"+$TreeE+"_c_hiRN";
				string $proxyswitch=` proxySwitch $proxyRN`;
				string $namespace =$workspace+":"+"TreeA_c_lo_all:";
				string $newgeo = $namespace+ $TreeE + "_c_geo";
				string $buf[] = `listRelatives -fullPath -parent $newgeo`;
				string $pgroup=`match "[^|]+"$buf[0]`;
				string $Group = $GRP + "|ot_s000003tree_hi_ref";
				if (!`objExists $Group`)
				{
					group -em -parent $GRP -name "ot_s000003tree_hi_ref";
				}
				parent $pgroup $Group;
				select $newgeo ;
				xform  -ws -m $geoinfos[0] $geoinfos[1]  $geoinfos[2]  $geoinfos[3] $geoinfos[4]  $geoinfos[5]  $geoinfos[6] $geoinfos[7]  $geoinfos[8]  $geoinfos[9] $geoinfos[10]  $geoinfos[11] $geoinfos[12] $geoinfos[13]  $geoinfos[14] $geoinfos[15];
				delete  $oldgeo;
			}
			else
			{
				string $workspace=`match "[^:]+" $refs[0]`;
				string $proxyRN=$workspace+":"+"TreeA_c_lo_all"+$TreeE+"_c_hiRN";
				string $proxyswitch=` proxySwitch $proxyRN`;
				string $namespace =$workspace+":"+"TreeA_c_lo_all:";
				string $newgeo = $namespace+ $TreeE + "_c_geo";
				string $buf[] = `listRelatives -fullPath -parent $newgeo`;
				string $pgroup=`match "[^|]+"$buf[0]`;
				string $Group = $GRP + "|ot_s000003tree_hi_ref";
				if (!`objExists $Group`)
				{
					group -em -parent $GRP -name "ot_s000003tree_hi_ref";
				}
				parent $pgroup $Group;
				select $newgeo ;
				xform  -ws -m $geoinfos[0] $geoinfos[1]  $geoinfos[2]  $geoinfos[3] $geoinfos[4]  $geoinfos[5]  $geoinfos[6] $geoinfos[7]  $geoinfos[8]  $geoinfos[9] $geoinfos[10]  $geoinfos[11] $geoinfos[12] $geoinfos[13]  $geoinfos[14] $geoinfos[15];
			}
		}
		else if (`match "bush" $obj` != "")
		{
			if (size($refs)==0)
			{
				string $refFile=`file -import -type "mayaBinary" -ra true -rdn -namespace "s000004Bush" -options "v=0"  -pr -loadReferenceDepth "all"  $bushRef`;
				string $newallrefs[]=`ls -rn`;
				string $newrefs[]= stringArrayRemove($oldallrefs, $newallrefs);
				string $workspace=`match "[^:]+" $newrefs[0]`;
				string $proxyRN=$workspace+":"+"bushA_c_L"+$TreeE+"_c_hiRN";
				string $proxyswitch=` proxySwitch $proxyRN`;
				string $namespace =$workspace+":"+"bushA_c_L:";
				string $newgeo = $namespace+ $TreeE + "_c_geo";
				string $buf[] = `listRelatives -fullPath -parent $newgeo`;
				string $pgroup=`match "[^|]+"$buf[0]`;
				string $Group = $GRP + "|ot_s000004bush_hi_ref";
				if (!`objExists $Group`)
				{
					group -em -parent $GRP -name "ot_s000004bush_hi_ref";
				}
				parent $pgroup $Group;
				select $newgeo ;
				xform  -ws -m $geoinfos[0] $geoinfos[1]  $geoinfos[2]  $geoinfos[3] $geoinfos[4]  $geoinfos[5]  $geoinfos[6] $geoinfos[7]  $geoinfos[8]  $geoinfos[9] $geoinfos[10]  $geoinfos[11] $geoinfos[12] $geoinfos[13]  $geoinfos[14] $geoinfos[15];
				delete  $oldgeo;
			}
			else
			{
				string $workspace=`match "[^:]+" $refs[0]`;
				string $proxyRN=$workspace+":"+"bushA_c_L"+$TreeE+"_c_hiRN";
				string $proxyswitch=` proxySwitch $proxyRN`;
				string $namespace =$workspace+":"+"bushA_c_L:";
				string $newgeo = $namespace+ $TreeE + "_c_geo";
				string $buf[] = `listRelatives -fullPath -parent $newgeo`;
				string $pgroup=`match "[^|]+"$buf[0]`;
				string $Group = $GRP + "|ot_s000004bush_hi_ref";
				if (!`objExists $Group`)
				{
					group -em -parent $GRP -name "ot_s000004bush_hi_ref";
				}
				parent $pgroup $Group;
				select $newgeo ;
				xform  -ws -m $geoinfos[0] $geoinfos[1]  $geoinfos[2]  $geoinfos[3] $geoinfos[4]  $geoinfos[5]  $geoinfos[6] $geoinfos[7]  $geoinfos[8]  $geoinfos[9] $geoinfos[10]  $geoinfos[11] $geoinfos[12] $geoinfos[13]  $geoinfos[14] $geoinfos[15];
			}
		}

		else if (`match "GenericHouse" $obj` != "")
		{
			if (size($refs)==0)
			{
				string $refFile=`file -import -type "mayaBinary" -ra true -rdn -namespace "ot_0000001house_final_h_ms_tex" -options "v=0"  -pr -loadReferenceDepth "all"  $GenRef`;
				string $newallrefs[]=`ls -rn`;
				string $newrefs[]= stringArrayRemove($oldallrefs, $newallrefs);
				string $workspace=`match "[^:]+" $newrefs[0]`;
				string $proxyRN=$workspace+":"+"GenericHouse1A_c_L_all"+$TreeE+"_c_hiRN";
				string $proxyswitch=` proxySwitch $proxyRN`;
				string $namespace =$workspace+":"+"GenericHouse1A_c_L_all:";
				string $newgeo = $namespace+ $TreeE + "_c_geo";
				string $buf[] = `listRelatives -fullPath -parent $newgeo`;
				string $pgroup=`match "[^|]+"$buf[0]`;
				string $Group = $GRP + "|ot_0000001house_hi_ref";
				if (!`objExists $Group`)
				{
					group -em -parent $GRP -name "ot_0000001house_hi_ref";
				}
				parent $pgroup $Group;
				select $newgeo ;
				xform  -ws -m	$objinfos[0] $objinfos[1]  $objinfos[2]  $objinfos[3] $objinfos[4]  $objinfos[5]  $objinfos[6] $objinfos[7]  $objinfos[8]  $objinfos[9] $objinfos[10]  $objinfos[11] $objinfos[12] $objinfos[13]  $objinfos[14] $objinfos[15];
				delete  $oldgeo;
			}
			else
			{
				string $workspace=`match "[^:]+" $refs[0]`;
				string $proxyRN=$workspace+":"+"GenericHouse1A_c_L_all"+$TreeE+"_c_hiRN";
				string $proxyswitch=` proxySwitch $proxyRN`;
				string $namespace =$workspace+":"+"GenericHouse1A_c_L_all:";
				string $newgeo = $namespace+ $TreeE + "_c_geo";
				string $buf[] = `listRelatives -fullPath -parent $newgeo`;
				string $pgroup=`match "[^|]+"$buf[0]`;
				string $Group = $GRP + "|ot_0000001house_hi_ref";
				if (!`objExists $Group`)
				{
					group -em -parent $GRP -name "ot_0000001house_hi_ref";
				}
				parent $pgroup $Group;
				select $newgeo ;
				xform  -ws -m $geoinfos[0] $geoinfos[1]  $geoinfos[2]  $geoinfos[3] $geoinfos[4]  $geoinfos[5]  $geoinfos[6] $geoinfos[7]  $geoinfos[8]  $geoinfos[9] $geoinfos[10]  $geoinfos[11] $geoinfos[12] $geoinfos[13]  $geoinfos[14] $geoinfos[15];
			}
		}
		else if (`match "cookiefacktoryext" $oldgeo` != "")
		{
		
			if (size($refs)==0)
			{
				
				string $refFile=`file -import -type "mayaBinary" -ra true -rdn -namespace "ot_s000013cookiefacktoryext_final_h_ms_tex" -options "v=0"  -pr -loadReferenceDepth "all"  $CookRef`;
				string $newallrefs[]=`ls -rn`;
				string $newrefs[]= stringArrayRemove($oldallrefs, $newallrefs);
				string $workspace=`match "[^:]+" $newrefs[0]`;
				string $proxyRN=$workspace+":"+"ot_s000013cookiefacktoryext_l_ms_texcookiefacktoryext"+"_c_hiRN";
				string $proxyswitch=` proxySwitch $proxyRN`;
				string $namespace =$workspace+":"+"ot_s000013cookiefacktoryext_l_ms_tex:";
				string $newgeo = $namespace+ "cookiefacktoryext_geo";
				string $buf[] = `listRelatives -fullPath -parent $newgeo`;
				string $pgroup=`match "[^|]+"$buf[0]`;
				string $Group = $GRP + "|ot_specialhouse_hi_ref";
				if (!`objExists $Group`)
				{
					group -em -parent $GRP -name "ot_specialhouse_hi_ref";
				}
				parent $pgroup $Group;
				select $newgeo ;
				xform  -ws -m	$objinfos[0] $objinfos[1]  $objinfos[2]  $objinfos[3] $objinfos[4]  $objinfos[5]  $objinfos[6] $objinfos[7]  $objinfos[8]  $objinfos[9] $objinfos[10]  $objinfos[11] $objinfos[12] $objinfos[13]  $objinfos[14] $objinfos[15];
				delete  $oldgeo;
			}
			else
			{
				string $workspace=`match "[^:]+" $refs[0]`;;
				string $proxyRN=$workspace+":"+"ot_s000013cookiefacktoryext_l_ms_texcookiefacktoryext"+"_c_hiRN";
				string $proxyswitch=` proxySwitch $proxyRN`;
				string $namespace =$workspace+":"+"ot_s000013cookiefacktoryext_l_ms_tex:";
				string $newgeo = $namespace+ "cookiefacktoryext_geo";
				string $buf[] = `listRelatives -fullPath -parent $newgeo`;
				string $pgroup=`match "[^|]+"$buf[0]`;
				string $Group = $GRP + "|ot_specialhouse_hi_ref";
				if (!`objExists $Group`)
				{
					group -em -parent $GRP -name "ot_specialhouse_hi_ref";
				}
				parent $pgroup $Group;
				select $newgeo ;
				xform  -ws -m $geoinfos[0] $geoinfos[1]  $geoinfos[2]  $geoinfos[3] $geoinfos[4]  $geoinfos[5]  $geoinfos[6] $geoinfos[7]  $geoinfos[8]  $geoinfos[9] $geoinfos[10]  $geoinfos[11] $geoinfos[12] $geoinfos[13]  $geoinfos[14] $geoinfos[15];
			}
		}
		else if (`match "special" $noworkspace` != "")
		{
			if (size($refs)==0)
			{
				if (`match "olsenhomeext" $oldgeo`!= "")
				{
					string $refFile=`file -import -type "mayaBinary" -ra true -rdn -namespace "house" -options "v=0"  -pr -loadReferenceDepth "all"  $olsenRef`;
				}
				else if (`match "ivanhomeext" $oldgeo`!= "")
				{
					string $refFile=`file -import -type "mayaBinary" -ra true -rdn -namespace "house" -options "v=0"  -pr -loadReferenceDepth "all"  $ivaRef`;
				}
				else if (`match "s000014townsquare" $oldgeo`!= "")
				{
					string $refFile=`file -import -type "mayaBinary" -ra true -rdn -namespace "house" -options "v=0"  -pr -loadReferenceDepth "all"  $townRef`;
				}
				else if (`match "ottohouse" $oldgeo`!= "")
				{
					string $refFile=`file -import -type "mayaBinary" -ra true -rdn -namespace "house" -options "v=0"  -pr -loadReferenceDepth "all"  $ottohouseRef`;
				}
				else if (`match "s000009townsquarebookshopext" $oldgeo`!= "")
				{
					string $refFile=`file -import -type "mayaBinary" -ra true -rdn -namespace "house" -options "v=0"  -pr -loadReferenceDepth "all"  $townshopeRef`;
				}
				else if (`match "schoolext" $oldgeo`!= "")
				{
					string $refFile=`file -import -type "mayaBinary" -ra true -rdn -namespace "house" -options "v=0"  -pr -loadReferenceDepth "all"  $schoolRef`;
				}
				else if (`match "park" $oldgeo`!= "")
				{
					string $refFile=`file -import -type "mayaBinary" -ra true -rdn -namespace "house" -options "v=0"  -pr -loadReferenceDepth "all"  $parkRef`;
				}
				else if (`match "blacksmithhome" $oldgeo`!= "")
				{
					string $refFile=`file -import -type "mayaBinary" -ra true -rdn -namespace "house" -options "v=0"  -pr -loadReferenceDepth "all"  $blacRef`;
				}
				else if (`match "s018002StreetBfirestation" $oldgeo`!= "")
				{
					string $refFile=`file -import -type "mayaBinary" -ra true -rdn -namespace "house" -options "v=0"  -pr -loadReferenceDepth "all"  $treetBRef`;
				}
				else if (`match "s008002Topperhomelocationmaterial" $oldgeo`!= "")
				{
					string $refFile=`file -import -type "mayaBinary" -ra true -rdn -namespace "house" -options "v=0"  -pr -loadReferenceDepth "all"  $Topperhome`;
				}
				else if (`match "s012002Harbourmaterial" $oldgeo`!= "")
				{
					string $refFile=`file -import -type "mayaBinary" -ra true -rdn -namespace "house" -options "v=0"  -pr -loadReferenceDepth "all"  $HarbRef`;
				}
				string $newallrefs[]=`ls -rn`;
				string $newrefs[]= stringArrayRemove($oldallrefs, $newallrefs);
				string $buffer[];
				$numTokens = `tokenize $newrefs[0] ":" $buffer`;
				string $wor=$buffer[1];
				string $buff[];
				$numTokens = `tokenize $wor"_" $buff`;
				string $workspace=$buffer[0]+":"+$buffer[1];
				string $proxyRN = $workspace + $buff[1] + "_c_hiRN";
				string $proxyswitch=` proxySwitch $proxyRN`;
				string $newgeo = $workspace+":"+$buff[1]+"_special_geo";
				string $buf[] = `listRelatives -fullPath -parent $newgeo`;
				string $pgroup=`match "[^|]+"$buf[0]`;
				string $Group = $GRP + "|ot_specialhouse_hi_ref";
				if (!`objExists $Group`)
				{
					group -em -parent $GRP -name "ot_specialhouse_hi_ref";
				}
				parent $pgroup $Group;
				select $newgeo ;
				xform  -ws -m	$objinfos[0] $objinfos[1]  $objinfos[2]  $objinfos[3] $objinfos[4]  $objinfos[5]  $objinfos[6] $objinfos[7]  $objinfos[8]  $objinfos[9] $objinfos[10]  $objinfos[11] $objinfos[12] $objinfos[13]  $objinfos[14] $objinfos[15];
				delete $oldGroupall;
			}
			else
			{
				string $buffer[];
				$numTokens = `tokenize $refs[0] ":" $buffer`;
				string $buff[];
				$numTokens = `tokenize $buffer[1] "_" $buff`;
				$workspace =$buffer[0]+":"+$buffer[1];
				string $proxyRN=$workspace+$buff[1]+"_c_hiRN";
				string $proxyswitch=` proxySwitch $proxyRN`;
				string $newgeo = $workspace+":"+$noworkspace;
				string $buf[] = `listRelatives -fullPath -parent $newgeo`;
				string $pgroup=`match "[^|]+"$buf[0]`;
				string $Group = $GRP + "|ot_specialhouse_hi_ref";
				if (!`objExists $Group`)
				{
					group -em -parent $GRP -name "ot_specialhouse_hi_ref";
				}
				parent $pgroup $Group;
				select $newgeo ;
				xform  -ws -m $objinfos[0] $objinfos[1]  $objinfos[2]  $objinfos[3] $objinfos[4]  $objinfos[5]  $objinfos[6] $objinfos[7]  $objinfos[8]  $objinfos[9] $objinfos[10]  $objinfos[11] $objinfos[12] $objinfos[13]  $objinfos[14] $objinfos[15]
				;
			}
		}
		else
		{
			$result1 = `confirmDialog -title "noswitch" -message "该物体没有高模"
						-button "取消" -defaultButton "取消" -cancelButton "取消" -dismissString "取消"`;
			
		}
		
	}
}
		
//替换为中模
global proc ot_switchMD()
{
	string $treeRef ="//file-cluster/GDC/Projects/OTTO/Project/scenes/sets/s000003tree/master/ot_s000003tree_final_h_ms_tex.mb";
	string $GenRef ="//file-cluster/GDC/Projects/OTTO/Project/scenes/sets/000001house/master/ot_000001house_final_h_ms_tex.mb";
	string $olsenRef ="//file-cluster/GDC/Projects/OTTO/Project/scenes/sets/s000017olsenhomeext/master/ot_s000017olsenhomeext_finish_h_ms_tex.mb";
	string $ottohouseRef="//file-cluster/GDC/Projects/OTTO/Project/scenes/sets/s000016ottohouseext/master/ot_s000016ottohouseext_final_h_ms_tex.mb";
	string $blacRef="//file-cluster/GDC/Projects/OTTO/Project/scenes/sets/s000018blacksmithhome/texture/ot_s000018blacksmithhome_final_h_tx.mb";
	string $objselect[]=`ls -sl -l`;
	for($obj in $objselect)
	{	
		string $buff[];
		$numTokens = `tokenize $obj "|" $buff`;
		string $GRP=$buff[0];
		string $oldgeo = `match ".*_geo[0-9]*" $obj`;
		string $oldGroupall = `match ".*_all[0-9]*" $obj`;
		string $refs[]=`ls -rn $obj`;
		float $geoinfos[]=`xform -q -ws -m  $oldgeo`;
		float $objinfos[]=`xform -q -ws -m  $obj`;
		string $oldallrefs[]=`ls -rn`;
		string $noworkspace=`match "[^:]+$"$oldgeo`;
		string $TreeE = `match "[^|]+$"$noworkspace`;
		$TreeE = `match "[^_]+" $TreeE`;
		if (`match "Tree" $obj` != "")
		{
			if (size($refs)==0)
			{
				string $refFile=`file -import -type "mayaBinary" -ra true -rdn -namespace "ot_s000003tree_final_h_ms_tex" -options "v=0"  -pr -loadReferenceDepth "all"  $treeRef`;
				string $newallrefs[]=`ls -rn`;
				string $newrefs[]= stringArrayRemove($oldallrefs, $newallrefs);
				string $workspace=`match "[^:]+" $newrefs[0]`;
				string $proxyRN=$workspace+":"+"TreeA_c_lo_all"+$TreeE+"_c_mdRN";
				string $proxyswitch=` proxySwitch $proxyRN`;
				string $namespace =$workspace+":"+"TreeA_c_lo_all:";
				string $newgeo = $namespace+ $TreeE + "_c_geo";
				string $buf[] = `listRelatives -fullPath -parent $newgeo`;
				string $pgroup=`match "[^|]+"$buf[0]`;
				string $Group = $GRP + "|ot_s000003tree_md_ref";
				if (!`objExists $Group`)
				{
					group -em -parent $GRP -name "ot_s000003tree_md_ref";
				}
				parent $pgroup $Group;
				select $newgeo ;
				xform  -ws -m $geoinfos[0] $geoinfos[1]  $geoinfos[2]  $geoinfos[3] $geoinfos[4]  $geoinfos[5]  $geoinfos[6] $geoinfos[7]  $geoinfos[8]  $geoinfos[9] $geoinfos[10]  $geoinfos[11] $geoinfos[12] $geoinfos[13]  $geoinfos[14] $geoinfos[15];
				delete  $oldgeo;
			
			}
			else
			{
				string $workspace=`match "[^:]+" $refs[0]`;
				string $proxyRN=$workspace+":"+"TreeA_c_lo_all"+$TreeE+"_c_mdRN";
				string $proxyswitch=` proxySwitch $proxyRN`;
				string $namespace =$workspace+":"+"TreeA_c_lo_all:";
				string $newgeo = $namespace+ $TreeE + "_c_geo";
				string $buf[] = `listRelatives -fullPath -parent $newgeo`;
				string $pgroup=`match "[^|]+"$buf[0]`;
				string $Group = $GRP + "|ot_s000003tree_md_ref";
				if (!`objExists $Group`)
				{
					group -em -parent $GRP -name "ot_s000003tree_md_ref";
				}
				parent $pgroup $Group;
				select $newgeo ;
				xform  -ws -m $geoinfos[0] $geoinfos[1]  $geoinfos[2]  $geoinfos[3] $geoinfos[4]  $geoinfos[5]  $geoinfos[6] $geoinfos[7]  $geoinfos[8]  $geoinfos[9] $geoinfos[10]  $geoinfos[11] $geoinfos[12] $geoinfos[13]  $geoinfos[14] $geoinfos[15];
			
				
			}
		}
		else if (`match "GenericHouse" $obj`!= "")
		{
			if (size($refs)==0)
			{
				string $refFile=`file -import -type "mayaBinary" -ra true -rdn -namespace "ot_0000001house_final_h_ms_tex" -options "v=0"  -pr -loadReferenceDepth "all"  $GenRef`;
				string $newallrefs[]=`ls -rn`;
				string $newrefs[]= stringArrayRemove($oldallrefs, $newallrefs);
				string $workspace=`match "[^:]+" $newrefs[0]`;
				string $proxyRN=$workspace+":"+"GenericHouse1A_c_L_all"+$TreeE+"_c_mdRN";
				string $proxyswitch=` proxySwitch $proxyRN`;
				string $namespace =$workspace+":"+"GenericHouse1A_c_L_all:";
				string $newgeo = $namespace+ $TreeE + "_c_geo";
				string $buf[] = `listRelatives -fullPath -parent $newgeo`;
				string $pgroup=`match "[^|]+"$buf[0]`;
				string $Group = $GRP + "|ot_0000001house_md_ref";
				if (!`objExists $Group`)
				{
					group -em -parent $GRP -name "ot_0000001house_md_ref";
				}
				parent $pgroup $Group;
				select $newgeo ;
				xform  -ws -m	$objinfos[0] $objinfos[1]  $objinfos[2]  $objinfos[3] $objinfos[4]  $objinfos[5]  $objinfos[6] $objinfos[7]  $objinfos[8]  $objinfos[9] $objinfos[10]  $objinfos[11] $objinfos[12] $objinfos[13]  $objinfos[14] $objinfos[15];
				delete  $oldgeo;
			}
			else
			{
				string $workspace=`match "[^:]+" $refs[0]`;
				string $proxyRN=$workspace+":"+"GenericHouse1A_c_L_all"+$TreeE+"_c_mdRN";
				string $proxyswitch=` proxySwitch $proxyRN`;
				string $namespace =$workspace+":"+"GenericHouse1A_c_L_all:";
				string $newgeo = $namespace+ $TreeE + "_c_geo";
				string $buf[] = `listRelatives -fullPath -parent $newgeo`;
				string $pgroup=`match "[^|]+"$buf[0]`;
				string $Group = $GRP + "|ot_0000001house_md_ref";
				if (!`objExists $Group`)
				{
					group -em -parent $GRP -name "ot_0000001house_md_ref";
				}
				parent $pgroup $Group;
				select $newgeo ;
				xform  -ws -m	$objinfos[0] $objinfos[1]  $objinfos[2]  $objinfos[3] $objinfos[4]  $objinfos[5]  $objinfos[6] $objinfos[7]  $objinfos[8]  $objinfos[9] $objinfos[10]  $objinfos[11] $objinfos[12] $objinfos[13]  $objinfos[14] $objinfos[15];
				
			}	
		}
		else if (`match "olsenhomeext" $noworkspace` != ""||`match "ottohouse" $oldgeo` != ""||`match "blacksmithhome" $oldgeo` != "")
		{
			if (size($refs)==0)
			{
				if (`match "olsenhomeext" $oldgeo`!= "")
				{
					string $refFile=`file -import -type "mayaBinary" -ra true -rdn -namespace "house" -options "v=0"  -pr -loadReferenceDepth "all"  $olsenRef`;
				}
				else if (`match "ottohouse" $oldgeo`!= "")
				{
					string $refFile=`file -import -type "mayaBinary" -ra true -rdn -namespace "house" -options "v=0"  -pr -loadReferenceDepth "all"  $ottohouseRef`;
				}
				else if (`match "blacksmithhome" $oldgeo`!= "")
				{
					string $refFile=`file -import -type "mayaBinary" -ra true -rdn -namespace "house" -options "v=0"  -pr -loadReferenceDepth "all"  $blacRef`;
				}
				string $newallrefs[]=`ls -rn`;
				string $newrefs[]= stringArrayRemove($oldallrefs, $newallrefs);
				string $buffer[];
				$numTokens = `tokenize $newrefs[0] ":" $buffer`;
				string $wor=$buffer[1];
				string $buff[];
				$numTokens = `tokenize $wor"_" $buff`;
				string $workspace=$buffer[0]+":"+$buffer[1];
				string $proxyRN = $workspace + $buff[1] + "_c_mdRN";
				string $proxyswitch=` proxySwitch $proxyRN`;
				string $newgeo = $workspace+":"+$buff[1]+"_special_geo";
				string $buf[] = `listRelatives -fullPath -parent $newgeo`;
				string $pgroup=`match "[^|]+"$buf[0]`;
				string $Group = $GRP + "|ot_specialhouse_md_ref";
				if (!`objExists $Group`)
				{
					group -em -parent $GRP -name "ot_specialhouse_md_ref";
				}
				parent $pgroup $Group;
				select $newgeo ;
				xform  -ws -m	$objinfos[0] $objinfos[1]  $objinfos[2]  $objinfos[3] $objinfos[4]  $objinfos[5]  $objinfos[6] $objinfos[7]  $objinfos[8]  $objinfos[9] $objinfos[10]  $objinfos[11] $objinfos[12] $objinfos[13]  $objinfos[14] $objinfos[15];
				delete $oldGroupall;
			}
			else
			{
				string $buffer[];
				$numTokens = `tokenize $refs[0] ":" $buffer`;
				string $buff[];
				$numTokens = `tokenize $buffer[1] "_" $buff`;
				$workspace =$buffer[0]+":"+$buffer[1];
				string $proxyRN=$workspace+$buff[1]+"_c_mdRN";
				string $proxyswitch=` proxySwitch $proxyRN`;
				string $newgeo = $workspace+":"+$noworkspace;
				string $buf[] = `listRelatives -fullPath -parent $newgeo`;
				string $pgroup=`match "[^|]+"$buf[0]`;
				string $Group = $GRP + "|ot_specialhouse_md_ref";
				if (!`objExists $Group`)
				{
					group -em -parent $GRP -name "ot_specialhouse_md_ref";
				}
				parent $pgroup $Group;
				select $newgeo ;
				xform  -ws -m $objinfos[0] $objinfos[1]  $objinfos[2]  $objinfos[3] $objinfos[4]  $objinfos[5]  $objinfos[6] $objinfos[7]  $objinfos[8]  $objinfos[9] $objinfos[10]  $objinfos[11] $objinfos[12] $objinfos[13]  $objinfos[14] $objinfos[15]
				;
			}
		}
		else
		{
			$result1 = `confirmDialog -title "noswitch" -message "该物体没有中模"
						-button "取消" -defaultButton "取消" -cancelButton "取消" -dismissString "取消"`;
			
		}

	}
}
//替换为代理
global proc ot_switchProxy()
{
	string $treeRef ="//file-cluster/GDC/Projects/OTTO/Project/scenes/sets/s000003tree/master/ot_s000003tree_final_h_ms_tex.mb";
	string $GenRef ="//file-cluster/GDC/Projects/OTTO/Project/scenes/sets/000001house/master/ot_000001house_final_h_ms_tex.mb";
	string $CookRef ="//file-cluster/GDC/Projects/OTTO/Project/scenes/sets/s000013cookiefacktoryext/master/ot_s000013cookiefacktoryext_fish_h_ms_tex.mb";
	string $olsenRef ="//file-cluster/GDC/Projects/OTTO/Project/scenes/sets/s000017olsenhomeext/master/ot_s000017olsenhomeext_finish_h_ms_tex.mb";
	string $ivaRef="//file-cluster/GDC/Projects/OTTO/Project/scenes/sets/s002001ivanhomeext003/texture/ot_s002001ivanhomeext003_final_h_tx.mb";
	string $bushRef ="//file-cluster/GDC/Projects/OTTO/Project/scenes/sets/s000004Bush/master/ot_s000004Bush_final_h_ms_tex.mb";
	string $townRef="//file-cluster/GDC/Projects/OTTO/Project/scenes/sets/s000014townsquare/master/ot_s000014townsquare_finsh_h_ms_tex.mb";
	string $ottohouseRef="//file-cluster/GDC/Projects/OTTO/Project/scenes/sets/s000016ottohouseext/master/ot_s000016ottohouseext_final_h_ms_tex.mb";
	string $townshopeRef="//file-cluster/GDC/Projects/OTTO/Project/scenes/sets/s000009townsquarebookshopext/texture/ot_s000009townsquarebookshopext_final_h_tx.mb";
	string $schoolRef="//file-cluster/GDC/Projects/OTTO/Project/scenes/sets/s000007schoolext/texture/ot_s000007schoolext_final_h_tx.mb";
	string $parkRef="//file-cluster/GDC/Projects/OTTO/Project/scenes/sets/s000015park/texture/ot_s000015park_final_h_tx.mb";
	string $blacRef="//file-cluster/GDC/Projects/OTTO/Project/scenes/sets/s000018blacksmithhome/texture/ot_s000018blacksmithhome_final_h_tx.mb";
	string $treetBRef="//file-cluster/GDC/Projects/OTTO/Project/scenes/sets/s018002StreetBfirestation/texture/ot_s018002StreetBfirestation_final_h_tx.mb";
	string $Topperhome="//file-cluster/GDC/Projects/OTTO/Project/scenes/sets/s008002Topperhomelocationmaterial/texture/ot_s008002Topperhomelocationmaterial_final_h_tx.mb";
	string $HarbRef="//file-cluster/GDC/Projects/OTTO/Project/scenes/sets/s012002Harbourmaterial/texture/ot_s012002Harbourmaterial_final_h_tx.mb";
	string $objselect[]=`ls -sl -l`;
	for($obj in $objselect)
	{	
		string $buff[];
		$numTokens = `tokenize $obj "|" $buff`;
		string $GRP=$buff[0];
		string $oldgeo = `match ".*_geo[0-9]*" $obj`;
		string $oldGroupall = `match ".*_all[0-9]*" $obj`;
		string $refs[]=`ls -rn $obj`;
		float $geoinfos[]=`xform -q -ws -m  $oldgeo`;
		float $objinfos[]=`xform -q -ws -m  $obj`;
		string $oldallrefs[]=`ls -rn`;
		string $noworkspace=`match "[^:]+$"$oldgeo`;
		string $TreeE = `match "[^|]+$"$noworkspace`;
		$TreeE = `match "[^_]+" $TreeE`;
		if (`match "Tree" $obj` != "")
		{
			if (size($refs)==0)
			{
				string $refFile=`file -import -type "mayaBinary" -ra true -rdn -namespace "ot_s000003tree_final_h_ms_tex" -options "v=0"  -pr -loadReferenceDepth "all"  $treeRef`;
				string $newallrefs[]=`ls -rn`;
				string $newrefs[]= stringArrayRemove($oldallrefs, $newallrefs);
				string $workspace=`match "[^:]+" $newrefs[0]`;
				string $proxyRN=$workspace+":"+"TreeA_c_lo_all"+$TreeE+"_c_proxRN";
				string $proxyswitch=` proxySwitch $proxyRN`;
				string $namespace =$workspace+":"+"TreeA_c_lo_all:";
				string $newgeo = $namespace+ $TreeE + "_c_geo";
				string $buf[] = `listRelatives -fullPath -parent $newgeo`;
				string $pgroup=`match "[^|]+"$buf[0]`;
				string $Group = $GRP + "|ot_s000003tree_proxy_ref";
				if (!`objExists $Group`)
				{
					group -em -parent $GRP -name "ot_s000003tree_proxy_ref";
				}
				parent $pgroup $Group;
				select $newgeo ;
				xform  -ws -m $geoinfos[0] $geoinfos[1]  $geoinfos[2]  $geoinfos[3] $geoinfos[4]  $geoinfos[5]  $geoinfos[6] $geoinfos[7]  $geoinfos[8]  $geoinfos[9] $geoinfos[10]  $geoinfos[11] $geoinfos[12] $geoinfos[13]  $geoinfos[14] $geoinfos[15];
				delete  $oldgeo;
			}
			else
			{
				string $workspace=`match "[^:]+" $refs[0]`;
				string $proxyRN=$workspace+":"+"TreeA_c_lo_all"+$TreeE+"_c_proxRN";
				string $proxyswitch=` proxySwitch $proxyRN`;
				string $namespace =$workspace+":"+"TreeA_c_lo_all:";
				string $newgeo = $namespace+ $TreeE + "_c_geo";
				string $buf[] = `listRelatives -fullPath -parent $newgeo`;
				string $pgroup=`match "[^|]+"$buf[0]`;
				string $Group = $GRP + "|ot_s000003tree_proxy_ref";
				if (!`objExists $Group`)
				{
					group -em -parent $GRP -name "ot_s000003tree_proxy_ref";
				}
				parent $pgroup $Group;
				select $newgeo ;
				xform  -ws -m $geoinfos[0] $geoinfos[1]  $geoinfos[2]  $geoinfos[3] $geoinfos[4]  $geoinfos[5]  $geoinfos[6] $geoinfos[7]  $geoinfos[8]  $geoinfos[9] $geoinfos[10]  $geoinfos[11] $geoinfos[12] $geoinfos[13]  $geoinfos[14] $geoinfos[15];
			
				
			}
		}
		else if (`match "bush" $obj` != "")
		{
			if (size($refs)==0)
			{
				string $refFile=`file -import -type "mayaBinary" -ra true -rdn -namespace "s000004Bush" -options "v=0"  -pr -loadReferenceDepth "all"  $bushRef`;
				string $newallrefs[]=`ls -rn`;
				string $newrefs[]= stringArrayRemove($oldallrefs, $newallrefs);
				string $workspace=`match "[^:]+" $newrefs[0]`;
				string $proxyRN=$workspace+":"+"bushA_c_L"+$TreeE+"_c_proxRN";
				string $proxyswitch=` proxySwitch $proxyRN`;
				string $namespace =$workspace+":"+"bushA_c_L:";
				string $newgeo = $namespace+ $TreeE + "_c_geo";
				string $buf[] = `listRelatives -fullPath -parent $newgeo`;
				string $pgroup=`match "[^|]+"$buf[0]`;
				string $Group = $GRP + "|ot_bush_proxy_ref";
				if (!`objExists $Group`)
				{
					group -em -parent $GRP -name "ot_bush_proxy_ref";
				}
				parent $pgroup $Group;
				select $newgeo ;
				xform  -ws -m $geoinfos[0] $geoinfos[1]  $geoinfos[2]  $geoinfos[3] $geoinfos[4]  $geoinfos[5]  $geoinfos[6] $geoinfos[7]  $geoinfos[8]  $geoinfos[9] $geoinfos[10]  $geoinfos[11] $geoinfos[12] $geoinfos[13]  $geoinfos[14] $geoinfos[15];
				delete  $oldgeo;
			}
			else
			{
				string $workspace=`match "[^:]+" $refs[0]`;
				string $proxyRN=$workspace+":"+"bushA_c_L"+$TreeE+"_c_proxRN";
				string $proxyswitch=` proxySwitch $proxyRN`;
				string $namespace =$workspace+":"+"bushA_c_L:";
				string $newgeo = $namespace+ $TreeE + "_c_geo";
				string $buf[] = `listRelatives -fullPath -parent $newgeo`;
				string $pgroup=`match "[^|]+"$buf[0]`;
				string $Group = $GRP + "|ot_bush_proxy_ref";
				if (!`objExists $Group`)
				{
					group -em -parent $GRP -name "ot_bush_proxy_ref";
				}
				parent $pgroup $Group;
				select $newgeo ;
				xform  -ws -m $geoinfos[0] $geoinfos[1]  $geoinfos[2]  $geoinfos[3] $geoinfos[4]  $geoinfos[5]  $geoinfos[6] $geoinfos[7]  $geoinfos[8]  $geoinfos[9] $geoinfos[10]  $geoinfos[11] $geoinfos[12] $geoinfos[13]  $geoinfos[14] $geoinfos[15];
			}
		}
		else if (`match "GenericHouse" $obj` != "")
		{
			if (size($refs)==0)
			{
				string $refFile=`file -import -type "mayaBinary" -ra true -rdn -namespace "ot_0000001house_final_h_ms_tex" -options "v=0"  -pr -loadReferenceDepth "all"  $GenRef`;
				string $newallrefs[]=`ls -rn`;
				string $newrefs[]= stringArrayRemove($oldallrefs, $newallrefs);
				string $workspace=`match "[^:]+" $newrefs[0]`;
				string $proxyRN=$workspace+":"+"GenericHouse1A_c_L_all"+$TreeE+"_c_proxRN";
				string $proxyswitch=` proxySwitch $proxyRN`;
				string $namespace =$workspace+":"+"GenericHouse1A_c_L_all:";
				string $newgeo = $namespace+ $TreeE + "_c_geo";
				string $buf[] = `listRelatives -fullPath -parent $newgeo`;
				string $pgroup=`match "[^|]+"$buf[0]`;
				string $Group = $GRP + "|ot_0000001house_proxy_ref";
				if (!`objExists $Group`)
				{
					group -em -parent $GRP -name "ot_0000001house_proxy_ref";
				}
				parent $pgroup $Group;
				select $newgeo ;
				xform  -ws -m	$objinfos[0] $objinfos[1]  $objinfos[2]  $objinfos[3] $objinfos[4]  $objinfos[5]  $objinfos[6] $objinfos[7]  $objinfos[8]  $objinfos[9] $objinfos[10]  $objinfos[11] $objinfos[12] $objinfos[13]  $objinfos[14] $objinfos[15];
				delete  $oldgeo;
			
			}
			else
			{
				string $workspace=`match "[^:]+" $refs[0]`;
				string $proxyRN=$workspace+":"+"GenericHouse1A_c_L_all"+$TreeE+"_c_proxRN";
				string $proxyswitch=` proxySwitch $proxyRN`;
				string $namespace =$workspace+":"+"GenericHouse1A_c_L_all:";
				string $newgeo = $namespace+ $TreeE + "_c_geo";
				string $buf[] = `listRelatives -fullPath -parent $newgeo`;
				string $pgroup=`match "[^|]+"$buf[0]`;
				string $Group = $GRP + "|ot_0000001house_proxy_ref";
				if (!`objExists $Group`)
				{
					group -em -parent $GRP -name "ot_0000001house_proxy_ref";
				}
				parent $pgroup $Group;
				select $newgeo ;
				xform  -ws -m $objinfos[0] $objinfos[1]  $objinfos[2]  $objinfos[3] $objinfos[4]  $objinfos[5]  $objinfos[6] $objinfos[7]  $objinfos[8]  $objinfos[9] $objinfos[10]  $objinfos[11] $objinfos[12] $objinfos[13]  $objinfos[14] $objinfos[15];
			
			}	
		}
		else if (`match "cookiefacktoryext" $oldgeo` != "")
		{
			if (size($refs)==0)
			{
				string $refFile=`file -import -type "mayaBinary" -ra true -rdn -namespace "ot_s000013cookiefacktoryext_final_h_ms_tex" -options "v=0"  -pr -loadReferenceDepth "all"  $CookRef`;
				string $newallrefs[]=`ls -rn`;
				string $newrefs[]= stringArrayRemove($oldallrefs, $newallrefs);
				string $workspace=`match "[^:]+" $newrefs[0]`;
				string $proxyRN=$workspace+":"+"ot_s000013cookiefacktoryext_l_ms_texcookiefacktoryext"+"_c_proxRN";
				string $proxyswitch=` proxySwitch $proxyRN`;
				string $namespace =$workspace+":"+"ot_s000013cookiefacktoryext_l_ms_tex:";
				string $newgeo = $namespace+ "cookiefacktoryext_geo";
				string $buf[] = `listRelatives -fullPath -parent $newgeo`;
				string $pgroup=`match "[^|]+"$buf[0]`;
				string $Group = $GRP + "|ot_specialhouse_proxy_ref";
				if (!`objExists $Group`)
				{
					group -em -parent $GRP -name "ot_specialhouse_proxy_ref";
				}
				parent $pgroup $Group;
				select $newgeo ;
				xform  -ws -m	$objinfos[0] $objinfos[1]  $objinfos[2]  $objinfos[3] $objinfos[4]  $objinfos[5]  $objinfos[6] $objinfos[7]  $objinfos[8]  $objinfos[9] $objinfos[10]  $objinfos[11] $objinfos[12] $objinfos[13]  $objinfos[14] $objinfos[15];
				delete $oldGroupall;
			}
			else
			{
				string $workspace=`match "[^:]+" $refs[0]`;;
				string $proxyRN=$workspace+":"+"ot_s000013cookiefacktoryext_l_ms_texcookiefacktoryext"+"_c_proxRN";
				string $proxyswitch=` proxySwitch $proxyRN`;
				string $namespace =$workspace+":"+"ot_s000013cookiefacktoryext_l_ms_tex:";
				string $newgeo = $namespace+ "cookiefacktoryext_geo";
				string $buf[] = `listRelatives -fullPath -parent $newgeo`;
				string $pgroup=`match "[^|]+"$buf[0]`;
				string $Group = $GRP + "|ot_specialhouse_proxy_ref";
				if (!`objExists $Group`)
				{
					group -em -parent $GRP -name "ot_specialhouse_proxy_ref";
				}
				parent $pgroup $Group;
				select $newgeo ;
				xform  -ws -m $objinfos[0] $objinfos[1]  $objinfos[2]  $objinfos[3] $objinfos[4]  $objinfos[5]  $objinfos[6] $objinfos[7]  $objinfos[8]  $objinfos[9] $objinfos[10]  $objinfos[11] $objinfos[12] $objinfos[13]  $objinfos[14] $objinfos[15]
				;
			}
		}
		else if (`match "special" $noworkspace` != "")
		{
			if (size($refs)==0)
			{
				if (`match "olsenhomeext" $oldgeo`!= "")
				{
					string $refFile=`file -import -type "mayaBinary" -ra true -rdn -namespace "house" -options "v=0"  -pr -loadReferenceDepth "all"  $olsenRef`;
				}
				else if (`match "ivanhomeext" $oldgeo`!= "")
				{
					string $refFile=`file -import -type "mayaBinary" -ra true -rdn -namespace "house" -options "v=0"  -pr -loadReferenceDepth "all"  $ivaRef`;
				}
				else if (`match "s000014townsquare" $oldgeo`!= "")
				{
					string $refFile=`file -import -type "mayaBinary" -ra true -rdn -namespace "house" -options "v=0"  -pr -loadReferenceDepth "all"  $townRef`;
				}
				else if (`match "ottohouse" $oldgeo`!= "")
				{
					string $refFile=`file -import -type "mayaBinary" -ra true -rdn -namespace "house" -options "v=0"  -pr -loadReferenceDepth "all"  $ottohouseRef`;
				}
				else if (`match "s000009townsquarebookshopext" $oldgeo`!= "")
				{
					string $refFile=`file -import -type "mayaBinary" -ra true -rdn -namespace "house" -options "v=0"  -pr -loadReferenceDepth "all"  $townshopeRef`;
				}
				else if (`match "schoolext" $oldgeo`!= "")
				{
					string $refFile=`file -import -type "mayaBinary" -ra true -rdn -namespace "house" -options "v=0"  -pr -loadReferenceDepth "all"  $schoolRef`;
				}
				else if (`match "park" $oldgeo`!= "")
				{
					string $refFile=`file -import -type "mayaBinary" -ra true -rdn -namespace "house" -options "v=0"  -pr -loadReferenceDepth "all"  $parkRef`;
				}
				else if (`match "blacksmithhome" $oldgeo`!= "")
				{
					string $refFile=`file -import -type "mayaBinary" -ra true -rdn -namespace "house" -options "v=0"  -pr -loadReferenceDepth "all"  $blacRef`;
				}
				else if (`match "s018002StreetBfirestation" $oldgeo`!= "")
				{
					string $refFile=`file -import -type "mayaBinary" -ra true -rdn -namespace "house" -options "v=0"  -pr -loadReferenceDepth "all"  $treetBRef`;
				}
				else if (`match "s008002Topperhomelocationmaterial" $oldgeo`!= "")
				{
					string $refFile=`file -import -type "mayaBinary" -ra true -rdn -namespace "house" -options "v=0"  -pr -loadReferenceDepth "all"  $Topperhome`;
				}
				else if (`match "s012002Harbourmaterial" $oldgeo`!= "")
				{
					string $refFile=`file -import -type "mayaBinary" -ra true -rdn -namespace "house" -options "v=0"  -pr -loadReferenceDepth "all"  $HarbRef`;
				}
				string $newallrefs[]=`ls -rn`;
				string $newrefs[]= stringArrayRemove($oldallrefs, $newallrefs);
				string $buffer[];
				$numTokens = `tokenize $newrefs[0] ":" $buffer`;
				string $wor=$buffer[1];
				string $buff[];
				$numTokens = `tokenize $wor"_" $buff`;
				string $workspace=$buffer[0]+":"+$buffer[1];
				string $proxyRN = $workspace + $buff[1] + "_c_proxRN";
				string $proxyswitch=` proxySwitch $proxyRN`;
				string $newgeo = $workspace+":"+$buff[1]+"_special_geo";
				string $buf[] = `listRelatives -fullPath -parent $newgeo`;
				string $pgroup=`match "[^|]+"$buf[0]`;
				string $Group = $GRP + "|ot_specialhouse_proxy_ref";
				if (!`objExists $Group`)
				{
					group -em -parent $GRP -name "ot_specialhouse_proxy_ref";
				}
				parent $pgroup $Group;
				select $newgeo ;
				xform  -ws -m	$objinfos[0] $objinfos[1]  $objinfos[2]  $objinfos[3] $objinfos[4]  $objinfos[5]  $objinfos[6] $objinfos[7]  $objinfos[8]  $objinfos[9] $objinfos[10]  $objinfos[11] $objinfos[12] $objinfos[13]  $objinfos[14] $objinfos[15];
				delete $oldGroupall;
			}
			else
			{
				string $buffer[];
				$numTokens = `tokenize $refs[0] ":" $buffer`;
				string $buff[];
				$numTokens = `tokenize $buffer[1] "_" $buff`;
				$workspace =$buffer[0]+":"+$buffer[1];
				string $proxyRN=$workspace+$buff[1]+"_c_proxRN";
				string $proxyswitch=` proxySwitch $proxyRN`;
				string $newgeo = $workspace+":"+$noworkspace;
				string $buf[] = `listRelatives -fullPath -parent $newgeo`;
				string $pgroup=`match "[^|]+"$buf[0]`;
				string $Group = $GRP + "|ot_specialhouse_proxy_ref";
				if (!`objExists $Group`)
				{
					group -em -parent $GRP -name "ot_specialhouse_proxy_ref";
				}
				parent $pgroup $Group;
				select $newgeo ;
				xform  -ws -m $objinfos[0] $objinfos[1]  $objinfos[2]  $objinfos[3] $objinfos[4]  $objinfos[5]  $objinfos[6] $objinfos[7]  $objinfos[8]  $objinfos[9] $objinfos[10]  $objinfos[11] $objinfos[12] $objinfos[13]  $objinfos[14] $objinfos[15]
				;
			}
		}
		else
		{
			$result1 = `confirmDialog -title "noswitch" -message "该物体没有 proxy"
						-button "取消" -defaultButton "取消" -cancelButton "取消" -dismissString "取消"`;
			
		}
	}
}
//替换低模
global proc ot_switchLow()
{
	string $treeRef ="//file-cluster/GDC/Projects/OTTO/Project/scenes/sets/s000003tree/master/ot_s000003tree_final_h_ms_tex.mb";
	string $GenRef ="//file-cluster/GDC/Projects/OTTO/Project/scenes/sets/000001house/master/ot_000001house_final_h_ms_tex.mb";
	string $CookRef ="//file-cluster/GDC/Projects/OTTO/Project/scenes/sets/s000013cookiefacktoryext/master/ot_s000013cookiefacktoryext_fish_h_ms_tex.mb";
	string $olsenRef ="//file-cluster/GDC/Projects/OTTO/Project/scenes/sets/s000017olsenhomeext/master/ot_s000017olsenhomeext_finish_h_ms_tex.mb";
	string $olsenRef ="//file-cluster/GDC/Projects/OTTO/Project/scenes/sets/s000017olsenhomeext/master/ot_s000017olsenhomeext_finish_h_ms_tex.mb";
	string $ivaRef="//file-cluster/GDC/Projects/OTTO/Project/scenes/sets/s002001ivanhomeext003/texture/ot_s002001ivanhomeext003_final_h_tx.mb";
	string $bushRef ="//file-cluster/GDC/Projects/OTTO/Project/scenes/sets/s000004Bush/master/ot_s000004Bush_final_h_ms_tex.mb";
	string $townRef="//file-cluster/GDC/Projects/OTTO/Project/scenes/sets/s000014townsquare/master/ot_s000014townsquare_finsh_h_ms_tex.mb";
	string $ottohouseRef="//file-cluster/GDC/Projects/OTTO/Project/scenes/sets/s000016ottohouseext/master/ot_s000016ottohouseext_final_h_ms_tex.mb";
	string $townshopeRef="//file-cluster/GDC/Projects/OTTO/Project/scenes/sets/s000009townsquarebookshopext/texture/ot_s000009townsquarebookshopext_final_h_tx.mb";
	string $schoolRef="//file-cluster/GDC/Projects/OTTO/Project/scenes/sets/s000007schoolext/texture/ot_s000007schoolext_final_h_tx.mb";
	string $parkRef="//file-cluster/GDC/Projects/OTTO/Project/scenes/sets/s000015park/texture/ot_s000015park_final_h_tx.mb";
	string $blacRef="//file-cluster/GDC/Projects/OTTO/Project/scenes/sets/s000018blacksmithhome/texture/ot_s000018blacksmithhome_final_h_tx.mb";
	string $treetBRef="//file-cluster/GDC/Projects/OTTO/Project/scenes/sets/s018002StreetBfirestation/texture/ot_s018002StreetBfirestation_final_h_tx.mb";
	string $Topperhome="//file-cluster/GDC/Projects/OTTO/Project/scenes/sets/s008002Topperhomelocationmaterial/texture/ot_s008002Topperhomelocationmaterial_final_h_tx.mb";
	string $HarbRef="//file-cluster/GDC/Projects/OTTO/Project/scenes/sets/s012002Harbourmaterial/texture/ot_s012002Harbourmaterial_final_h_tx.mb";
	string $objselect[]=`ls -sl -l`;
	for($obj in $objselect)
	{	
		string $oldgeo = `match ".*_geo[0-9]*" $obj`;
		string $buff[];
		$numTokens = `tokenize $obj "|" $buff`;
		string $GRP=$buff[0];
		string $oldGroupall = `match ".*_all[0-9]*" $obj`;
		string $refs[]=`ls -rn $obj`;
		float $geoinfos[]=`xform -q -ws -m  $oldgeo`;
		float $objinfos[]=`xform -q -ws -m  $obj`;
		string $oldallrefs[]=`ls -rn`;
		string $noworkspace=`match "[^:]+$"$oldgeo`;
		string $TreeE = `match "[^|]+$"$noworkspace`;
		$TreeE = `match "[^_]+" $TreeE`;
		if (`match "Tree" $TreeE` != "")
		{
			if (size($refs)==0)
			{
				string $refFile=`file -import -type "mayaBinary" -ra true -rdn -namespace "ot_s000003tree_final_h_ms_tex" -options "v=0"  -pr -loadReferenceDepth "all"  $treeRef`;
				string $newallrefs[]=`ls -rn`;
				string $newrefs[]= stringArrayRemove($oldallrefs, $newallrefs);
				string $workspace=`match "[^:]+" $newrefs[0]`;
				if (`match "TreeA" $TreeE` != "")
				{
					string $proxyRN=$workspace+":"+"TreeA_c_lo_allRN";
					string $proxyswitch=` proxySwitch $proxyRN`;
				}
				else
				{
					string $proxyRN=$workspace+":"+"TreeA_c_lo_all"+$TreeE+"_c_LowRN";
					string $proxyswitch=` proxySwitch $proxyRN`;
				}
				//string $proxyRN=$workspace+":"+"TreeA_c_lo_all"+$TreeE+"_c_LowRN";
				//string $proxyswitch=` proxySwitch $proxyRN`;
				string $namespace =$workspace+":"+"TreeA_c_lo_all:";
				string $newgeo = $namespace+ $TreeE + "_c_geo";
				string $buf[] = `listRelatives -fullPath -parent $newgeo`;
				string $pgroup=`match "[^|]+"$buf[0]`;
				string $Group = $GRP + "|ot_s000003tree_low_ref";
				if (!`objExists $Group`)
				{
					group -em -parent $GRP -name "ot_s000003tree_low_ref";
				}
				parent $pgroup $Group;
				select $newgeo ;
				xform  -ws -m $geoinfos[0] $geoinfos[1]  $geoinfos[2]  $geoinfos[3] $geoinfos[4]  $geoinfos[5]  $geoinfos[6] $geoinfos[7]  $geoinfos[8]  $geoinfos[9] $geoinfos[10]  $geoinfos[11] $geoinfos[12] $geoinfos[13]  $geoinfos[14] $geoinfos[15];
				delete  $oldgeo;
			}
			else
			{
				string $workspace=`match "[^:]+" $refs[0]`;
				if (`match "TreeA" $TreeE` != "")
				{
					string $proxyRN=$workspace+":"+"TreeA_c_lo_allRN";
					string $proxyswitch=` proxySwitch $proxyRN`;
				}
				else
				{
					string $proxyRN=$workspace+":"+"TreeA_c_lo_all"+$TreeE+"_c_LowRN";
					string $proxyswitch=` proxySwitch $proxyRN`;
				}
				string $namespace =$workspace+":"+"TreeA_c_lo_all:";
				string $newgeo = $namespace+ $TreeE + "_c_geo";
				string $buf[] = `listRelatives -fullPath -parent $newgeo`;
				string $pgroup=`match "[^|]+"$buf[0]`;
				string $Group = $GRP + "|ot_s000003tree_low_ref";
				if (!`objExists $Group`)
				{
					group -em -parent $GRP -name "ot_s000003tree_low_ref";
				}
				parent $pgroup $Group;
				select $newgeo ;
				xform  -ws -m $geoinfos[0] $geoinfos[1]  $geoinfos[2]  $geoinfos[3] $geoinfos[4]  $geoinfos[5]  $geoinfos[6] $geoinfos[7]  $geoinfos[8]  $geoinfos[9] $geoinfos[10]  $geoinfos[11] $geoinfos[12] $geoinfos[13]  $geoinfos[14] $geoinfos[15];
			
			}
		}
		else if (`match "bush" $obj` != "")
		{
			if (size($refs)==0)
			{
				string $refFile=`file -import -type "mayaBinary" -ra true -rdn -namespace "s000004Bush" -options "v=0"  -pr -loadReferenceDepth "all"  $bushRef`;
				string $newallrefs[]=`ls -rn`;
				string $newrefs[]= stringArrayRemove($oldallrefs, $newallrefs);
				string $workspace=`match "[^:]+" $newrefs[0]`;
				if (`match "bushA" $TreeE` != "")
				{
					string $proxyRN=$workspace+":"+"bushA_c_LRN";
					string $proxyswitch=` proxySwitch $proxyRN`;
				}
				else
				{
					string $proxyRN=$workspace+":"+"bushA_c_L"+$TreeE+"_c_LowRN";
					string $proxyswitch=` proxySwitch $proxyRN`;
				}
				//string $proxyRN=$workspace+":"+"bushA_c_L"+$TreeE+"_c_LowRN";
				//string $proxyswitch=` proxySwitch $proxyRN`;
				string $namespace =$workspace+":"+"bushA_c_L:";
				string $newgeo = $namespace+ $TreeE + "_c_geo";
				string $buf[] = `listRelatives -fullPath -parent $newgeo`;
				string $pgroup=`match "[^|]+"$buf[0]`;
				string $Group = $GRP + "|ot_bush_low_ref";
				if (!`objExists $Group`)
				{
					group -em -parent $GRP -name "ot_bush_low_ref";
				}
				parent $pgroup $Group;
				select $newgeo ;
				xform  -ws -m $geoinfos[0] $geoinfos[1]  $geoinfos[2]  $geoinfos[3] $geoinfos[4]  $geoinfos[5]  $geoinfos[6] $geoinfos[7]  $geoinfos[8]  $geoinfos[9] $geoinfos[10]  $geoinfos[11] $geoinfos[12] $geoinfos[13]  $geoinfos[14] $geoinfos[15];
				delete  $oldgeo;
			}
			else
			{
				string $workspace=`match "[^:]+" $refs[0]`;
				if (`match "bushA" $TreeE` != "")
				{
					string $proxyRN=$workspace+":"+"bushA_c_LRN";
					string $proxyswitch=` proxySwitch $proxyRN`;
				}
				else
				{
					string $proxyRN=$workspace+":"+"bushA_c_L"+$TreeE+"_c_LowRN";
					string $proxyswitch=` proxySwitch $proxyRN`;
				}
				//string $proxyRN=$workspace+":"+"bushA_c_L"+$TreeE+"_c_LowRN";
				//string $proxyswitch=` proxySwitch $proxyRN`;
				string $namespace =$workspace+":"+"bushA_c_L:";
				string $newgeo = $namespace+ $TreeE + "_c_geo";
				string $buf[] = `listRelatives -fullPath -parent $newgeo`;
				string $pgroup=`match "[^|]+"$buf[0]`;
				string $Group = $GRP + "|ot_bush_low_ref";
				if (!`objExists $Group`)
				{
					group -em -parent $GRP -name "ot_bush_low_ref";
				}
				parent $pgroup $Group;
				select $newgeo ;
				xform  -ws -m $geoinfos[0] $geoinfos[1]  $geoinfos[2]  $geoinfos[3] $geoinfos[4]  $geoinfos[5]  $geoinfos[6] $geoinfos[7]  $geoinfos[8]  $geoinfos[9] $geoinfos[10]  $geoinfos[11] $geoinfos[12] $geoinfos[13]  $geoinfos[14] $geoinfos[15];
			}
		}
		else if (`match "GenericHouse" $obj` != "")
		{
			if (size($refs)==0)
			{
				string $refFile=`file -import -type "mayaBinary" -ra true -rdn -namespace "ot_0000001house_final_h_ms_tex" -options "v=0"  -pr -loadReferenceDepth "all"  $GenRef`;
				string $newallrefs[]=`ls -rn`;
				string $newrefs[]= stringArrayRemove($oldallrefs, $newallrefs);
				string $workspace=`match "[^:]+" $newrefs[0]`;
				if (`match "GenericHouse1A" $TreeE` != "")
				{
					string $proxyRN=$workspace+":"+"GenericHouse1A_c_L_allRN";
					string $proxyswitch=` proxySwitch $proxyRN`;
				}
				else
				{
					string $proxyRN=$workspace+":"+"GenericHouse1A_c_L_all"+$TreeE+"_c_LowRN";
					string $proxyswitch=` proxySwitch $proxyRN`;
				}
				string $namespace =$workspace+":"+"GenericHouse1A_c_L_all:";
				string $newgeo = $namespace+ $TreeE + "_c_geo";
				string $buf[] = `listRelatives -fullPath -parent $newgeo`;
				string $pgroup=`match "[^|]+"$buf[0]`;
				string $Group = $GRP + "|ot_0000001house_low_ref";
				if (!`objExists $Group`)
				{
					group -em -parent $GRP -name "ot_0000001house_low_ref";
				}
				parent $pgroup $Group;
				select $newgeo ;
				xform  -ws -m	$objinfos[0] $objinfos[1]  $objinfos[2]  $objinfos[3] $objinfos[4]  $objinfos[5]  $objinfos[6] $objinfos[7]  $objinfos[8]  $objinfos[9] $objinfos[10]  $objinfos[11] $objinfos[12] $objinfos[13]  $objinfos[14] $objinfos[15];
				delete  $oldgeo;
			
			}
			else
			{
				string $workspace=`match "[^:]+" $refs[0]`;
				if (`match "GenericHouse1A" $TreeE` != "")
				{
					string $proxyRN=$workspace+":"+"GenericHouse1A_c_L_allRN";
					string $proxyswitch=` proxySwitch $proxyRN`;
				}
				else
				{
					string $proxyRN=$workspace+":"+"GenericHouse1A_c_L_all"+$TreeE+"_c_LowRN";
					string $proxyswitch=` proxySwitch $proxyRN`;
				}
				string $namespace =$workspace+":"+"GenericHouse1A_c_L_all:";
				string $newgeo = $namespace+ $TreeE + "_c_geo";
				string $buf[] = `listRelatives -fullPath -parent $newgeo`;
				string $pgroup=`match "[^|]+"$buf[0]`;
				string $Group = $GRP + "|ot_0000001house_low_ref";
				if (!`objExists $Group`)
				{
					group -em -parent $GRP -name "ot_0000001house_low_ref";
				}
				parent $pgroup $Group;
				select $newgeo ;
				xform  -ws -m $geoinfos[0] $geoinfos[1]  $geoinfos[2]  $geoinfos[3] $geoinfos[4]  $geoinfos[5]  $geoinfos[6] $geoinfos[7]  $geoinfos[8]  $geoinfos[9] $geoinfos[10]  $geoinfos[11] $geoinfos[12] $geoinfos[13]  $geoinfos[14] $geoinfos[15];
			}	
		}
		else if (`match "cookiefacktoryext" $oldgeo` != "")
		{
			if (size($refs)==0)
			{
				string $refFile=`file -import -type "mayaBinary" -ra true -rdn -namespace "ot_s000013cookiefacktoryext_final_h_ms_tex" -options "v=0"  -pr -loadReferenceDepth "all"  $CookRef`;
				string $newallrefs[]=`ls -rn`;
				string $newrefs[]= stringArrayRemove($oldallrefs, $newallrefs);
				string $workspace=`match "[^:]+" $newrefs[0]`;
				string $proxyRN=$workspace+":"+"ot_s000013cookiefacktoryext_l_ms_texRN";
				string $proxyswitch=` proxySwitch $proxyRN`;
				string $namespace =$workspace+":"+"ot_s000013cookiefacktoryext_l_ms_tex:";
				string $newgeo = $namespace+ "cookiefacktoryext_geo";
				string $buf[] = `listRelatives -fullPath -parent $newgeo`;
				string $pgroup=`match "[^|]+"$buf[0]`;
				string $Group = $GRP + "|ot_specialhouse_low_ref";
				if (!`objExists $Group`)
				{
					group -em -parent $GRP -name "ot_specialhouse_low_ref";
				}
				parent $pgroup $Group;
				select $newgeo ;
				xform  -ws -m $geoinfos[0] $geoinfos[1]  $geoinfos[2]  $geoinfos[3] $geoinfos[4]  $geoinfos[5]  $geoinfos[6] $geoinfos[7]  $geoinfos[8]  $geoinfos[9] $geoinfos[10]  $geoinfos[11] $geoinfos[12] $geoinfos[13]  $geoinfos[14] $geoinfos[15];
				delete  $oldgeo;
			}
			else
			{
				string $workspace=`match "[^:]+" $refs[0]`;;
				string $proxyRN=$workspace+":"+"ot_s000013cookiefacktoryext_l_ms_texRN";
				string $proxyswitch=` proxySwitch $proxyRN`;
				string $namespace =$workspace+":"+"ot_s000013cookiefacktoryext_l_ms_tex:";
				string $newgeo = $namespace+ "cookiefacktoryext_geo";
				string $buf[] = `listRelatives -fullPath -parent $newgeo`;
				string $pgroup=`match "[^|]+"$buf[0]`;
				string $Group = $GRP + "|ot_specialhouse_low_ref";
				if (!`objExists $Group`)
				{
					group -em -parent $GRP -name "ot_specialhouse_low_ref";
				}
				parent $pgroup $Group;
				select $newgeo ;
				xform  -ws -m $geoinfos[0] $geoinfos[1]  $geoinfos[2]  $geoinfos[3] $geoinfos[4]  $geoinfos[5]  $geoinfos[6] $geoinfos[7]  $geoinfos[8]  $geoinfos[9] $geoinfos[10]  $geoinfos[11] $geoinfos[12] $geoinfos[13]  $geoinfos[14] $geoinfos[15]
				;
			}
		}
		else if (`match "special" $noworkspace` != "")
		{
			if (size($refs)==0)
			{
				if (`match "olsenhomeext" $oldgeo`!= "")
				{
					string $refFile=`file -import -type "mayaBinary" -ra true -rdn -namespace "house" -options "v=0"  -pr -loadReferenceDepth "all"  $olsenRef`;
				}
				else if (`match "ivanhomeext" $oldgeo`!= "")
				{
					string $refFile=`file -import -type "mayaBinary" -ra true -rdn -namespace "house" -options "v=0"  -pr -loadReferenceDepth "all"  $ivaRef`;
				}
				else if (`match "s000014townsquare" $oldgeo`!= "")
				{
					string $refFile=`file -import -type "mayaBinary" -ra true -rdn -namespace "house" -options "v=0"  -pr -loadReferenceDepth "all"  $townRef`;
				}
				else if (`match "ottohouse" $oldgeo`!= "")
				{
					string $refFile=`file -import -type "mayaBinary" -ra true -rdn -namespace "house" -options "v=0"  -pr -loadReferenceDepth "all"  $ottohouseRef`;
				}
				else if (`match "s000009townsquarebookshopext" $oldgeo`!= "")
				{
					string $refFile=`file -import -type "mayaBinary" -ra true -rdn -namespace "house" -options "v=0"  -pr -loadReferenceDepth "all"  $townshopeRef`;
				}
				else if (`match "schoolext" $oldgeo`!= "")
				{
					string $refFile=`file -import -type "mayaBinary" -ra true -rdn -namespace "house" -options "v=0"  -pr -loadReferenceDepth "all"  $schoolRef`;
				}
				else if (`match "park" $oldgeo`!= "")
				{
					string $refFile=`file -import -type "mayaBinary" -ra true -rdn -namespace "house" -options "v=0"  -pr -loadReferenceDepth "all"  $parkRef`;
				}
				else if (`match "blacksmithhome" $oldgeo`!= "")
				{
					string $refFile=`file -import -type "mayaBinary" -ra true -rdn -namespace "house" -options "v=0"  -pr -loadReferenceDepth "all"  $blacRef`;
				}
				else if (`match "s018002StreetBfirestation" $oldgeo`!= "")
				{
					string $refFile=`file -import -type "mayaBinary" -ra true -rdn -namespace "house" -options "v=0"  -pr -loadReferenceDepth "all"  $treetBRef`;
				}
				else if (`match "s008002Topperhomelocationmaterial" $oldgeo`!= "")
				{
					string $refFile=`file -import -type "mayaBinary" -ra true -rdn -namespace "house" -options "v=0"  -pr -loadReferenceDepth "all"  $Topperhome`;
				}
				else if (`match "s012002Harbourmaterial" $oldgeo`!= "")
				{
					string $refFile=`file -import -type "mayaBinary" -ra true -rdn -namespace "house" -options "v=0"  -pr -loadReferenceDepth "all"  $HarbRef`;
				}
				string $newallrefs[]=`ls -rn`;
				string $newrefs[]= stringArrayRemove($oldallrefs, $newallrefs);
				string $buffer[];
				$numTokens = `tokenize $newrefs[0] ":" $buffer`;
				string $wor=$buffer[1];
				string $buff[];
				$numTokens = `tokenize $wor"_" $buff`;
				string $workspace=$buffer[0]+":"+$buffer[1];
				string $proxyRN=$workspace+"RN";
				string $proxyswitch=` proxySwitch $proxyRN`;
				string $newgeo = $workspace+":"+$buff[1]+"_special_geo";
				string $buf[] = `listRelatives -fullPath -parent $newgeo`;
				string $pgroup=`match "[^|]+"$buf[0]`;
				string $Group = $GRP + "|ot_specialhouse_low_ref";
				if (!`objExists $Group`)
				{
					group -em -parent $GRP -name "ot_specialhouse_low_ref";
				}
				parent $pgroup $Group;
				select $newgeo ;
				xform  -ws -m	$objinfos[0] $objinfos[1]  $objinfos[2]  $objinfos[3] $objinfos[4]  $objinfos[5]  $objinfos[6] $objinfos[7]  $objinfos[8]  $objinfos[9] $objinfos[10]  $objinfos[11] $objinfos[12] $objinfos[13]  $objinfos[14] $objinfos[15];
				delete $oldGroupall;
			}
			else
			{
				string $buffer[];
				$numTokens = `tokenize $refs[0] ":" $buffer`;
				string $buff[];
				$numTokens = `tokenize $buffer[1] "_" $buff`;
				$workspace =$buffer[0]+":"+$buffer[1];
				string $proxyRN=$workspace+"RN";
				string $proxyswitch=` proxySwitch $proxyRN`;
				string $newgeo = $workspace+":"+$noworkspace;
				string $buf[] = `listRelatives -fullPath -parent $newgeo`;
				string $pgroup=`match "[^|]+"$buf[0]`;
				string $Group = $GRP + "|ot_specialhouse_low_ref";
				if (!`objExists $Group`)
				{
					group -em -parent $GRP -name "ot_specialhouse_low_ref";
				}
				parent $pgroup $Group;
				select $newgeo ;
				xform  -ws -m $objinfos[0] $objinfos[1]  $objinfos[2]  $objinfos[3] $objinfos[4]  $objinfos[5]  $objinfos[6] $objinfos[7]  $objinfos[8]  $objinfos[9] $objinfos[10]  $objinfos[11] $objinfos[12] $objinfos[13]  $objinfos[14] $objinfos[15]
				;
			}
		}
		else
		{
			$result1 = `confirmDialog -title "noswitch" -message "该物体没有低模"
						-button "取消" -defaultButton "取消" -cancelButton "取消" -dismissString "取消"`;
			
		}
		
	}
}
//导入参考（去代理）
/*
global proc ot_imRP()
{
	ot_HHimRP();
	zzjSetMatList;
}
*/


global proc ot_imRP()
{
	source "//file-cluster/GDC/Resource/Support/Maya/projects/OTTO/zwRemoveAllProxy.mel";
	//source "zzjReturnMatList.mel";
	string $proxyManagers[] = `ls -type "proxyManager"`;
	//zzjGetMatList;
	string $refPath[]=`file -q -r`;
	if(size($proxyManagers)>0)
	{
		zwRemoveAllProxy;
	}
	if(size($refPath)>0)
	{
		ot_imReference;
	}
	//zzjSetMatList;
}

